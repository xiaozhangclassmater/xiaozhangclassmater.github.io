<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React æ˜¯ä»€ä¹ˆ</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.a90809c0.css" as="style"><link rel="preload" href="/assets/js/app.feb21b2a.js" as="script"><link rel="preload" href="/assets/js/2.75ba61f2.js" as="script"><link rel="preload" href="/assets/js/4.0a0d7342.js" as="script"><link rel="prefetch" href="/assets/js/10.be2d4676.js"><link rel="prefetch" href="/assets/js/11.a6cdee63.js"><link rel="prefetch" href="/assets/js/12.f66c58d3.js"><link rel="prefetch" href="/assets/js/13.f6a7ab74.js"><link rel="prefetch" href="/assets/js/14.f2495746.js"><link rel="prefetch" href="/assets/js/15.501e6ef6.js"><link rel="prefetch" href="/assets/js/16.f88cdb61.js"><link rel="prefetch" href="/assets/js/17.cee20973.js"><link rel="prefetch" href="/assets/js/18.45990e00.js"><link rel="prefetch" href="/assets/js/19.c5e4d633.js"><link rel="prefetch" href="/assets/js/20.72e018c7.js"><link rel="prefetch" href="/assets/js/21.bc6f4b58.js"><link rel="prefetch" href="/assets/js/22.233bac0d.js"><link rel="prefetch" href="/assets/js/3.ec1e420f.js"><link rel="prefetch" href="/assets/js/5.fb1d9eba.js"><link rel="prefetch" href="/assets/js/6.695dc6e3.js"><link rel="prefetch" href="/assets/js/7.f7cf561e.js"><link rel="prefetch" href="/assets/js/8.65918f4e.js"><link rel="prefetch" href="/assets/js/9.74b6acd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a90809c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://xiaozhangclassmater.github.io/minivueBarrage-docs-web/#/dashboard" target="_self" class="nav-link external">
  é¦–é¡µ
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webçŸ¥è¯†å¹¿åœº" class="dropdown-title"><span class="title">webçŸ¥è¯†å¹¿åœº</span> <span class="arrow down"></span></button> <button type="button" aria-label="webçŸ¥è¯†å¹¿åœº" class="mobile-dropdown-title"><span class="title">webçŸ¥è¯†å¹¿åœº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/javascript/javascript.html" class="nav-link">
  JavaScriptç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/vue/vue3.html" class="nav-link">
  vueç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/React/React.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  reactç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/webpack/webpack.html" class="nav-link">
  webpackç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/Browser/Browser.html" class="nav-link">
  æµè§ˆå™¨ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJsç³»åˆ—" class="dropdown-title"><span class="title">NodeJsç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJsç³»åˆ—" class="mobile-dropdown-title"><span class="title">NodeJsç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/node/Node.html" class="nav-link">
  NodeJSç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/ORM/ORM.html" class="nav-link">
  Node_ORMæ¡†æ¶ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/express/express.html" class="nav-link">
  expressç¬”è®°
</a></li></ul></div></div><div class="nav-item"><a href="/web/sql/mysql.html" class="nav-link">
  sqlç¬”è®°
</a></div><div class="nav-item"><a href="/web/netWork/netWork.html" class="nav-link">
  è®¡ç®—æœºç½‘ç»œç¬”è®°
</a></div><div class="nav-item"><a href="/web/InterviewQuestion/InterviewQuestion.html" class="nav-link">
  é¢è¯•é¢˜
</a></div><div class="nav-item"><a href="/web/studyNote/studyNote.html" class="nav-link">
  å·¥ä½œç¬”è®°
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://xiaozhangclassmater.github.io/minivueBarrage-docs-web/#/dashboard" target="_self" class="nav-link external">
  é¦–é¡µ
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webçŸ¥è¯†å¹¿åœº" class="dropdown-title"><span class="title">webçŸ¥è¯†å¹¿åœº</span> <span class="arrow down"></span></button> <button type="button" aria-label="webçŸ¥è¯†å¹¿åœº" class="mobile-dropdown-title"><span class="title">webçŸ¥è¯†å¹¿åœº</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/javascript/javascript.html" class="nav-link">
  JavaScriptç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/vue/vue3.html" class="nav-link">
  vueç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/React/React.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  reactç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/webpack/webpack.html" class="nav-link">
  webpackç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/Browser/Browser.html" class="nav-link">
  æµè§ˆå™¨ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJsç³»åˆ—" class="dropdown-title"><span class="title">NodeJsç³»åˆ—</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJsç³»åˆ—" class="mobile-dropdown-title"><span class="title">NodeJsç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/node/Node.html" class="nav-link">
  NodeJSç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/ORM/ORM.html" class="nav-link">
  Node_ORMæ¡†æ¶ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/web/express/express.html" class="nav-link">
  expressç¬”è®°
</a></li></ul></div></div><div class="nav-item"><a href="/web/sql/mysql.html" class="nav-link">
  sqlç¬”è®°
</a></div><div class="nav-item"><a href="/web/netWork/netWork.html" class="nav-link">
  è®¡ç®—æœºç½‘ç»œç¬”è®°
</a></div><div class="nav-item"><a href="/web/InterviewQuestion/InterviewQuestion.html" class="nav-link">
  é¢è¯•é¢˜
</a></div><div class="nav-item"><a href="/web/studyNote/studyNote.html" class="nav-link">
  å·¥ä½œç¬”è®°
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>å¿«é€Ÿä¸Šæ‰‹</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ä¸ªäººç¬”è®°</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/web/webpack/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/web/vue/vue3.html" class="sidebar-link">vue3</a></li><li><a href="/web/React/React.html" aria-current="page" class="active sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/React/React.html#react-æ˜¯ä»€ä¹ˆ" class="sidebar-link">React æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactçš„ç‰¹ç‚¹-å®ƒä¸vueæœ‰ä»€ä¹ˆåŒºåˆ«" class="sidebar-link">Reactçš„ç‰¹ç‚¹ï¼Œå®ƒä¸Vueæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-ç»„ä»¶åŒ–" class="sidebar-link">React ç»„ä»¶åŒ–</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactä¸­çˆ¶å­é€šä¿¡çš„åŸç†" class="sidebar-link">Reactä¸­çˆ¶å­é€šä¿¡çš„åŸç†ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-ä¸­-ä»€ä¹ˆæ˜¯æ•°æ®ä¸å¯å˜" class="sidebar-link">React ä¸­ ä»€ä¹ˆæ˜¯æ•°æ®ä¸å¯å˜?</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactä¸­-setstateä¸vueæ•°æ®æ›´æ–°çš„åŒºåˆ«" class="sidebar-link">Reactä¸­ setStateä¸Vueæ•°æ®æ›´æ–°çš„åŒºåˆ«ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-setstate-æ›´æ–°æ•°æ®æ‰§è¡Œæœºåˆ¶" class="sidebar-link">React setState æ›´æ–°æ•°æ®æ‰§è¡Œæœºåˆ¶ ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-purecomponents-å’Œ-meno" class="sidebar-link">React pureComponents å’Œ Meno</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">React ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-å¦‚ä½•é˜»æ­¢ç»„ä»¶æ¸²æŸ“" class="sidebar-link">React å¦‚ä½•é˜»æ­¢ç»„ä»¶æ¸²æŸ“</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#hooks-usestate-æ•°æ®æ›´æ–°åŸç†" class="sidebar-link">Hooks useState æ•°æ®æ›´æ–°åŸç†</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reacté«˜é˜¶ç»„ä»¶å®šä¹‰å’Œä½œç”¨" class="sidebar-link">Reacté«˜é˜¶ç»„ä»¶å®šä¹‰å’Œä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-ä¸­å¦‚ä½•å®ç°ä¸€ä¸ªé¢œè‰²ä¸»é¢˜åˆ‡æ¢" class="sidebar-link">React ä¸­å¦‚ä½•å®ç°ä¸€ä¸ªé¢œè‰²ä¸»é¢˜åˆ‡æ¢?</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactä¸­partols-å’Œ-fragment" class="sidebar-link">Reactä¸­Partols å’Œ Fragment</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-ä¸­-strictmode-çš„ä½œç”¨" class="sidebar-link">React ä¸­ StrictMode çš„ä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#ä½¿ç”¨-createcontext-å’Œ-usecontext-å®ç°è·¨ç»„ä»¶é€šä¿¡" class="sidebar-link">ä½¿ç”¨ CreateContext å’Œ useContext å®ç°è·¨ç»„ä»¶é€šä¿¡</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#class-setstate-å’Œ-hooks-setstate-çš„åŒºåˆ«" class="sidebar-link">class setState å’Œ hooks setState çš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactçº¯å‡½æ•°" class="sidebar-link">reactçº¯å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#react-useeffectå‡½æ•°" class="sidebar-link">react UseEffectå‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reduxçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ" class="sidebar-link">reduxçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#redux-ä¸‰å¤§åŸåˆ™" class="sidebar-link">redux ä¸‰å¤§åŸåˆ™</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reactç±»ç»„ä»¶-ä¸­æ— æ³•é€šè¿‡jsè¿›è¡Œè·³è½¬è·¯ç”±å¦‚ä½•è§£å†³" class="sidebar-link">reactç±»ç»„ä»¶ ä¸­æ— æ³•é€šè¿‡JSè¿›è¡Œè·³è½¬è·¯ç”±å¦‚ä½•è§£å†³ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶æ˜¯å¦‚ä½•ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€çš„" class="sidebar-link">ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶æ˜¯å¦‚ä½•ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€çš„ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#useeffect-å’Œ-uselayouteffect-çš„åŒºåˆ«" class="sidebar-link">useEffect å’Œ useLayoutEffect çš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#useimperativehandleçš„ä½œç”¨" class="sidebar-link">useImperativeHandleçš„ä½œç”¨</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Šå°æ‹¬å·" class="sidebar-link">ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Šå°æ‹¬å·()ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#store-è®¢é˜…çŠ¶æ€çš„æ”¹å˜-å˜åŒ–" class="sidebar-link">Store è®¢é˜…çŠ¶æ€çš„æ”¹å˜ï¼ˆå˜åŒ–ï¼‰</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#redux-æ‰§è¡Œæµç¨‹" class="sidebar-link">Redux æ‰§è¡Œæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reduxæ‰§è¡Œæµç¨‹å›¾" class="sidebar-link">reduxæ‰§è¡Œæµç¨‹å›¾</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reduxçš„æ•°æ®æµå‘" class="sidebar-link">Reduxçš„æ•°æ®æµå‘</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#redux-ä¸­é—´ä»¶-æ‰§è¡Œæµç¨‹" class="sidebar-link">Redux ä¸­é—´ä»¶ æ‰§è¡Œæµç¨‹</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reduxé…ç½®æ•°æ®æŒä¹…åŒ–" class="sidebar-link">Reduxé…ç½®æ•°æ®æŒä¹…åŒ–</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#è§£å†³react-æ•°æ®æŒä¹…åŒ–-é…ç½®é”™è¯¯" class="sidebar-link">è§£å†³react æ•°æ®æŒä¹…åŒ– é…ç½®é”™è¯¯</a></li><li class="sidebar-sub-header"><a href="/web/React/React.html#reduxä¸­çš„æ€§èƒ½ä¼˜åŒ–" class="sidebar-link">reduxä¸­çš„æ€§èƒ½ä¼˜åŒ–</a></li></ul></li><li><a href="/web/node/Node.html" class="sidebar-link">NodeJS</a></li><li><a href="/web/sql/mysql.html" class="sidebar-link">Mysql</a></li><li><a href="/web/ORM/ORM.html" class="sidebar-link">Node_ORM</a></li><li><a href="/web/express/express.html" class="sidebar-link">express</a></li><li><a href="/web/Browser/Browser.html" class="sidebar-link">Browser</a></li><li><a href="/web/InterviewQuestion/InterviewQuestion.html" class="sidebar-link">é¢è¯•é¢˜</a></li><li><a href="/web/netWork/netWork.html" class="sidebar-link">è®¡ç®—æœºç½‘ç»œ</a></li><li><a href="/web/studyNote/studyNote.html" class="sidebar-link">å·¥ä½œç¬”è®°</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="react-æ˜¯ä»€ä¹ˆ"><a href="#react-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> React æ˜¯ä»€ä¹ˆ</h2> <p>React æ˜¯ä¸€ä¸ªç¼–å†™å‰ç«¯UIçš„JavaScript åº“ ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</p> <h2 id="reactçš„ç‰¹ç‚¹-å®ƒä¸vueæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#reactçš„ç‰¹ç‚¹-å®ƒä¸vueæœ‰ä»€ä¹ˆåŒºåˆ«" class="header-anchor">#</a> Reactçš„ç‰¹ç‚¹ï¼Œå®ƒä¸Vueæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2> <h3 id="å†…éƒ¨å®ç°åŸç†ç»“æ„"><a href="#å†…éƒ¨å®ç°åŸç†ç»“æ„" class="header-anchor">#</a> å†…éƒ¨å®ç°åŸç†ç»“æ„</h3> <p>2.1.1<strong>React</strong>ç»„ä»¶ä¹‹é—´çš„æ•°æ®è€¦åˆæ€§ä½ï¼Œæ•°æ®ä¹‹é—´çš„äº’åŠ¨éœ€è¦å…¨æƒç»è¿‡React å†…éƒ¨å¤„ç†ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯React<strong>æ•°æ®ä¸å¯å˜ç†å¿µ</strong>çš„åŸå› ã€‚</p> <h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="header-anchor">#</a> åŒºåˆ«</h4> <p>2.1.2  <strong>React</strong> æ˜¯å•å‘æ•°æ®æµï¼Œæ•°æ®ç”±æœ€é«˜çˆ¶çº§å‘ä¸‹ä¼ é€’ï¼Œvueä¹Ÿæ˜¯å•é¡¹æ•°æ®æµï¼Œä¸å…è®¸å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶çš„å€¼</p> <ul><li>æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒã€‚<code>react</code>ä½¿ç”¨çš„æ˜¯ä¸å¯å˜æ•°æ®ï¼Œè€Œ<code>Vue</code>ä½¿ç”¨çš„æ˜¯å¯å˜çš„æ•°æ®</li> <li>ç»„ä»¶åŒ–é€šä¿¡çš„ä¸åŒã€‚<code>react</code>ä¸­æˆ‘ä»¬é€šè¿‡ä½¿ç”¨å›è°ƒå‡½æ•°æ¥è¿›è¡Œé€šä¿¡çš„ï¼Œè€Œ<code>Vue</code>ä¸­å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ¶ˆæ¯æœ‰ä¸¤ç§æ–¹å¼ï¼šäº‹ä»¶å’Œå›è°ƒå‡½æ•°</li> <li>diffç®—æ³•ä¸åŒã€‚<code>react</code>ä¸»è¦ä½¿ç”¨diffé˜Ÿåˆ—ä¿å­˜éœ€è¦æ›´æ–°å“ªäº›DOMï¼Œå¾—åˆ°patchæ ‘ï¼Œå†ç»Ÿä¸€æ“ä½œæ‰¹é‡æ›´æ–°DOMã€‚<code>Vue</code> ä½¿ç”¨åŒå‘æŒ‡é’ˆï¼Œè¾¹å¯¹æ¯”ï¼Œè¾¹æ›´æ–°DOM</li> <li>è™šæ‹Ÿdomï¼Œå¯ä»¥æ›´å¥½çš„è·¨å¹³å°ï¼Œè¿›è¡Œæ¸²æŸ“</li></ul> <h4 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="header-anchor">#</a> å…±åŒç‚¹</h4> <ol><li>éƒ½æ˜¯é€šè¿‡æ•°æ®é©±åŠ¨è§†å›¾æ›´æ–°</li> <li>éƒ½æœ‰ç»„ä»¶åŒ–æ€æƒ³</li> <li>éƒ½æœ‰ Virtual DOM  è™šæ‹Ÿ  Dom ,ç„¶åæ¸²æŸ“åˆ°çœŸå®DOMä¸Š</li> <li>éƒ½æœ‰æ”¯æŒnativeçš„æ–¹æ¡ˆï¼š<code>Vue</code>çš„<code>weex</code>ã€<code>React</code>çš„<code>React native</code></li> <li>éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼š<code>Vue</code>çš„<code>vue-cli</code>ã€<code>React</code>çš„<code>Create React App</code></li></ol> <h2 id="react-ç»„ä»¶åŒ–"><a href="#react-ç»„ä»¶åŒ–" class="header-anchor">#</a> React ç»„ä»¶åŒ–</h2> <h3 id="æ ¹æ®ç»„ä»¶å®šä¹‰æ–¹å¼"><a href="#æ ¹æ®ç»„ä»¶å®šä¹‰æ–¹å¼" class="header-anchor">#</a> æ ¹æ®ç»„ä»¶å®šä¹‰æ–¹å¼</h3> <p>â€‹		å¯åˆ†ä¸ºå‡½æ•°å¼ç»„ä»¶ å’Œ ç±»ç»„ä»¶</p> <h3 id="æ ¹æ®ç»„ä»¶æ˜¯å¦ç»´æŠ¤è‡ªå·±çŠ¶æ€"><a href="#æ ¹æ®ç»„ä»¶æ˜¯å¦ç»´æŠ¤è‡ªå·±çŠ¶æ€" class="header-anchor">#</a> æ ¹æ®ç»„ä»¶æ˜¯å¦ç»´æŠ¤è‡ªå·±çŠ¶æ€</h3> <p>â€‹		å¯åˆ†ä¸º æ— çŠ¶æ€ç»„ä»¶å’Œæœ‰çŠ¶æ€ç»„ä»¶</p> <h3 id="æ ¹æ®ç»„ä»¶èŒè´£ä¸åŒ"><a href="#æ ¹æ®ç»„ä»¶èŒè´£ä¸åŒ" class="header-anchor">#</a> æ ¹æ®ç»„ä»¶èŒè´£ä¸åŒ</h3> <p>â€‹		å¯åˆ†ä¸ºå±•ç¤ºå‹ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶</p> <h2 id="reactä¸­çˆ¶å­é€šä¿¡çš„åŸç†"><a href="#reactä¸­çˆ¶å­é€šä¿¡çš„åŸç†" class="header-anchor">#</a> Reactä¸­çˆ¶å­é€šä¿¡çš„åŸç†ï¼Ÿ</h2> <blockquote><p>react ä¸­ åœ¨çˆ¶ç»„ä»¶å®šä¹‰æ•°æ® å­ç»„ä»¶é€šè¿‡props æ¥æ”¶è¿›è¡Œä½¿ç”¨ ï¼Œ å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼Œ</p></blockquote> <h2 id="react-ä¸­-ä»€ä¹ˆæ˜¯æ•°æ®ä¸å¯å˜"><a href="#react-ä¸­-ä»€ä¹ˆæ˜¯æ•°æ®ä¸å¯å˜" class="header-anchor">#</a> React ä¸­ ä»€ä¹ˆæ˜¯æ•°æ®ä¸å¯å˜?</h2> <p>æ•°æ®ä¸å¯å˜ï¼Œæ˜¯æŒ‡Reactä¸­çš„æ•°æ®éƒ½æ˜¯éƒ½æ˜¯å—æ§çŠ¶æ€ï¼ŒReact å†…éƒ¨åšäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä¸èƒ½å¤Ÿç›´æ¥ä¿®æ”¹stateé‡Œçš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡setstate ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ç»™React Reactå†…éƒ¨è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å®Œæˆä¹‹åï¼Œé‡æ–°æ‰§è¡ŒRenderå‡½æ•°å°†çœŸå®çš„UIæ¸²æŸ“åˆ°é¡µé¢</p> <div class="language-JS extra-class"><pre class="language-js"><code>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mesVal</span><span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span>

<span class="token comment">//React éµå¾ª æ•°æ®ä¸å¯å˜åŸåˆ™ å¦‚æœç³»éœ€è¦ä¿®æ”¹æ•°æ® åˆ™é€šè¿‡ setState æ–¹æ³• å°†æ•°æ® è¿”å›ç»™state è¿›è¡Œä¿®æ”¹é‡æ–°æ¸²æŸ“</span>

<span class="token comment">/**
 * å®æ—¶ç›‘å¬ inputè¾“å…¥æ¡†çš„å€¼  å®ç°åŸç† ?
 * 1ï¼šç¬¬ä¸€æ¬¡è¿›å…¥ React è¿›è¡Œåˆå§‹åŒ–  é€šè¿‡renderæ¸²æŸ“ Domè‡³é¡µé¢ä¸Š
 * 2ï¼šé¦–æ¬¡è°ƒç”¨render å‡½æ•°   è€Œè¾“å…¥æ¡†çš„valueå€¼ä¸ stateé‡Œçš„ æ•°æ®è¿›è¡Œç»‘å®š æ­¤æ—¶ é€šè¿‡ onchange äº‹ä»¶è¿›è¡Œç›‘å¬æ•°æ®å˜åŒ–
 * 3ï¼šåœ¨onchange äº‹ä»¶ä¸­ é€šè¿‡ this.setState æ–¹æ³•è¿›è¡Œä¿®æ”¹state æ•°æ® ï¼Œä¿®æ”¹å®Œæˆåå†æ¬¡è°ƒç”¨render å‡½æ•° è¿›è¡Œé‡æ–°æ¸²æŸ“
 * 
 */</span>
<span class="token keyword">class</span> <span class="token class-name">ChangeValue</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ•°æ® </span>
  state <span class="token operator">=</span> state
  <span class="token comment">// æ–¹æ³• </span>
  <span class="token function-variable function">handelChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">mesVal</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1111'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>mesVal<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handelChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ChangeValue
 <span class="token operator">*</span><span class="token operator">/</span>
</code></pre></div><h2 id="reactä¸­-setstateä¸vueæ•°æ®æ›´æ–°çš„åŒºåˆ«"><a href="#reactä¸­-setstateä¸vueæ•°æ®æ›´æ–°çš„åŒºåˆ«" class="header-anchor">#</a> Reactä¸­ setStateä¸Vueæ•°æ®æ›´æ–°çš„åŒºåˆ«ï¼Ÿ</h2> <h3 id="æ›´æ–°æœºåˆ¶"><a href="#æ›´æ–°æœºåˆ¶" class="header-anchor">#</a> æ›´æ–°æœºåˆ¶</h3> <blockquote><p>Vueé€šè¿‡æ•°æ®åŠ«æŒ ï¼Œå¯¹æ•°æ®è¿›è¡Œç›‘å¬ï¼Œå¦‚æœdataä¸­å‘ç”Ÿå˜åŒ–å åˆ™ç›´æ¥å°†template æ¨¡æ¿ è¿›è¡Œrender å†æ‰§è¡Œhå‡½æ•° è¿›è¡Œç¼–è¯‘</p> <h4 id="setstate"><a href="#setstate" class="header-anchor">#</a> setState</h4> <p>â€‹	setState æ¥è‡ªäº Component å®ä¾‹</p> <p>â€‹	React ç±»ç»„ä»¶ æ›´æ–°è§†å›¾ é€šè¿‡ setState æ–¹æ³• è¿›è¡Œè§†å›¾æ›´æ–°ï¼Œé€šè¿‡åˆå¹¶å¯¹è±¡å°†æ–°å€¼ä¸æ—§å€¼æ›¿æ¢ï¼Œå†å‡ºå‘render 	å‡½æ•°è¿›è¡Œè§†å›¾æ›´æ–°</p> <h4 id="react-ä¸­-setstate-æ€§èƒ½ä¼˜åŒ–"><a href="#react-ä¸­-setstate-æ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> React ä¸­ setState æ€§èƒ½ä¼˜åŒ–</h4> <p>React ä¸­ æ ¹æ® æœ€æ–°çš„setState è¿›è¡Œ è§†å›¾æ›´æ–°</p> <h4 id="setstateçš„å‚æ•°"><a href="#setstateçš„å‚æ•°" class="header-anchor">#</a> setStateçš„å‚æ•°</h4> <p>å‚æ•°1 ï¼š ä¼ å…¥æ›´æ–°çš„å¯¹è±¡ æˆ– å›è°ƒå‡½æ•°</p> <p>â€‹	å¯¹è±¡ ï¼šæ›´æ–°åŸç†ï¼Œé€šè¿‡object.assignåˆå¹¶ä¹‹åè¿›è¡Œæ›´æ–°</p> <p>â€‹	å›è°ƒ ï¼š å›è°ƒçš„å‚æ•° ï¼Œ ç¬¬ä¸€ä¸ª state ï¼Œ ä¸Šä¸€æ¬¡çŠ¶æ€ ï¼Œ ç¬¬äºŒä¸ªå‚æ•° å½“å‰ç±»ç»„ä»¶çš„props</p> <p>å‚æ•°2 ï¼š å½“æ•°æ®æ›´æ–°å®Œæˆæ—¶ React å†…éƒ¨ä¼šè‡ªåŠ¨å›è°ƒ ç¬¬äºŒä¸ªå‡½æ•° ï¼Œæ­¤æ—¶ å³æ˜¯æœ€æ–°çš„çŠ¶æ€</p></blockquote> <h2 id="react-setstate-æ›´æ–°æ•°æ®æ‰§è¡Œæœºåˆ¶"><a href="#react-setstate-æ›´æ–°æ•°æ®æ‰§è¡Œæœºåˆ¶" class="header-anchor">#</a> React setState æ›´æ–°æ•°æ®æ‰§è¡Œæœºåˆ¶ ï¼Ÿ</h2> <h3 id="å¼‚æ­¥æ›´æ–°"><a href="#å¼‚æ­¥æ›´æ–°" class="header-anchor">#</a> å¼‚æ­¥æ›´æ–°</h3> <p>é¦–å…ˆï¼ŒReact æ˜¯ä¸€ä¸ªå•å‘æ•°æ®æµUIæ¡†æ¶ï¼Œè€ŒVueæ˜¯ åŒå‘æ•°æ®æµï¼Œè¾¹å¯¹æ¯”ï¼Œè¾¹æ›´æ–°DOM , React setstate æ›´æ–°æ•°æ®é¦–å…ˆä¼šé€šè¿‡ä¾èµ–æ”¶é›†ï¼Œç„¶åå°†éœ€è¦æ›´æ–°çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œ å½“react ç›‘å¬åˆ°ä¸å†éœ€è¦æ›´æ–°æ•°æ®çš„æ—¶å€™ ï¼ŒisBatchingUpdates  ï¼ˆæ‰¹é‡æ›´æ–°ï¼‰ çš„çŠ¶æ€ä¸º true React å†…éƒ¨åˆ™ä¼šç»Ÿä¸€æ›´æ–°æ•°æ®ï¼Œ<strong>å½“å‡ºç°æ›´æ–°åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œåè€…ä¼šè¦†ç›–å‰é¢</strong>ã€‚</p> <h3 id="ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå¼‚æ­¥æ›´æ–°"><a href="#ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå¼‚æ­¥æ›´æ–°" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå¼‚æ­¥æ›´æ–°?</h3> <blockquote><h4 id="ä¸ºäº†æé«˜æ¸²æŸ“æ€§èƒ½-ä¿è¯æœ€åä¸€æ¬¡diff-å®ç°ä¸€æ¬¡render"><a href="#ä¸ºäº†æé«˜æ¸²æŸ“æ€§èƒ½-ä¿è¯æœ€åä¸€æ¬¡diff-å®ç°ä¸€æ¬¡render" class="header-anchor">#</a> <strong>ä¸ºäº†æé«˜æ¸²æŸ“æ€§èƒ½ ï¼Œä¿è¯æœ€åä¸€æ¬¡diff å®ç°ä¸€æ¬¡render</strong></h4> <h4 id="å¦‚æœ-æ˜¯åŒæ­¥æ›´æ–°-ä¼šå‡ºç°çˆ¶å­ç»„ä»¶æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ"><a href="#å¦‚æœ-æ˜¯åŒæ­¥æ›´æ–°-ä¼šå‡ºç°çˆ¶å­ç»„ä»¶æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ" class="header-anchor">#</a> å¦‚æœ æ˜¯åŒæ­¥æ›´æ–° ä¼šå‡ºç°çˆ¶å­ç»„ä»¶æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</h4></blockquote> <h3 id="react-åŒæ­¥æ›´æ–°å®ç°"><a href="#react-åŒæ­¥æ›´æ–°å®ç°" class="header-anchor">#</a> React åŒæ­¥æ›´æ–°å®ç°</h3> <p>å°†setstate æ”¾åœ¨å®šæ—¶å™¨å½“ä¸­ï¼Œæ•°æ®åˆ™ä¼šåŒæ­¥æ›´æ–°</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// æ˜¯ç”±äº åœ¨React ä¸­æ•°æ® æ›´æ–° ç”±äº settimeout æ˜¯å¼‚æ­¥ä»»åŠ¡  å…ˆæ‰§è¡Œ åŒæ­¥ä»£ç  ï¼Œå½“åŒæ­¥ä»£ç  æ‰§è¡Œå®Œæ¯•æ—¶ æ­¤æ—¶ æ‰æ‰§è¡Œ å¼‚æ­¥ä»£ç  å½“ åŒæ­¥ä»£ç  æ‰§è¡Œå®Œæˆæ—¶  isBatchingUpdates æ ‡è®°å·²æˆä¸º false æ‰€ä»¥æ­¤æ—¶ä¼š  åŒæ­¥æ›´æ–°æ•°æ®</span>

è§£å†³åŒæ­¥æ›´æ–°çš„é—®é¢˜ï¼ŒReact å†…éƒ¨æä¾›äº† ReactDom<span class="token punctuation">.</span><span class="token function">unstable_batchedupdates</span><span class="token punctuation">(</span>ä¸ç¨³å®šçš„æ‰¹é‡æ›´æ–°<span class="token punctuation">)</span> æ–¹æ³•ï¼Œå‚æ•°ä¸ºä¸€ä¸ªå›è°ƒå‡½æ•° 
ReactDom<span class="token punctuation">.</span><span class="token function">unstable_batchedupdates</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    åœ¨æ­¤å¤„åšå¼‚æ­¥æ›´æ–°æ•°æ®æ“ä½œ
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">flushSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> å‡½æ•° å†…éƒ¨æ›´æ–°

</code></pre></div><h2 id="react-purecomponents-å’Œ-meno"><a href="#react-purecomponents-å’Œ-meno" class="header-anchor">#</a> React pureComponents å’Œ Meno</h2> <blockquote><p>ä½œç”¨ ï¼šä¼˜åŒ–render å‡½æ•°  å½“å€¼æ²¡æœ‰è¢«å¼•ç”¨æ—¶ åˆ™ä¸é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶</p></blockquote> <div class="language-TSX extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'./components/Home'</span>
<span class="token keyword">import</span> ProductList <span class="token keyword">from</span> <span class="token string">'./components/ProductList'</span>
<span class="token keyword">interface</span> <span class="token class-name">AppState</span> <span class="token punctuation">{</span>
message<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
<span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token operator">:</span> App<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
   message<span class="token operator">:</span> <span class="token string">'äº”èŠ±è‚‰'</span>
 <span class="token punctuation">}</span> <span class="token keyword">as</span> AppState
<span class="token punctuation">}</span>
<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'111ss'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>nextProps<span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>AppState<span class="token operator">&gt;</span><span class="token punctuation">,</span> nextState<span class="token operator">:</span> Readonly<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> nextContext<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token keyword">as</span> AppState
 <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">!==</span> nextProps<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token boolean">true</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">else</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token boolean">false</span>
 <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token keyword">as</span> AppState
 <span class="token keyword">return</span> <span class="token punctuation">(</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">è¿™æ˜¯ä¸€ä¸ª</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ç‚¹å‡»æ›´æ–°</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Home</span></span> <span class="token attr-name">message</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProductList</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
   </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-TSX extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ProductList <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Product Render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ProductList </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ProductList 
</code></pre></div><h3 id="purecomponent"><a href="#purecomponent" class="header-anchor">#</a> <strong>pureComponent</strong></h3> <p>åœ¨ ç±»ç»„ä»¶ ç»§æ‰¿ <strong>pureComponents</strong> ï¼Œsetstate æ›´æ–°æ—¶å¦‚æœå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªåœ°å€å€¼æ—¶ï¼Œè§†å›¾å°†ä¸ä¼šæ›´æ–°</p> <p>â€‹	<strong>åŸç†ï¼šReactå†…éƒ¨ é€šè¿‡ shouldComponentUpdate æ–°çš„ props å’Œ æ—§çš„ props è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªå¼•ç”¨åœ°å€ åˆ™React ä¼šè®¤ä¸ºæ²¡æœ‰å‘ç”Ÿæ›´æ–°ã€‚</strong></p> <h2 id="react-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#react-ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> React ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2> <p>constructor Super</p> <p><strong>ç»„ä»¶åˆ›å»º</strong></p> <p>constructor React ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ï¼Œä½†å¿…é¡»ä¸superå…³é”®å­—é…åˆä½¿ç”¨</p> <p>æ‰§è¡Œ render</p> <p><strong>ç»„ä»¶æŒ‚è½½</strong></p> <p>componentdisMount</p> <p>ç»„ä»¶æŒ‚è½½å ç«‹å³è°ƒç”¨ ,  è¿™ä¸ªæ–¹æ³•æ˜¯æ¯”è¾ƒé€‚åˆæ·»åŠ è®¢é˜…çš„åœ°æ–¹ã€‚å¦‚æœæ·»åŠ äº†è®¢é˜…ï¼Œè¯·ä¸è¦å¿˜è®°åœ¨ componentWillUnmount() é‡Œå–æ¶ˆè®¢é˜…,ä¾‹å¦‚åœ¨è¯¥ç”Ÿå‘½å‘¨æœŸå†…å¼€å¯å®šæ—¶å™¨</p> <p><strong>ç»„ä»¶æ›´æ–°</strong></p> <p>componentdisUpdate</p> <p>ç»„ä»¶æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨</p> <p><strong>ç»„ä»¶å¸è½½</strong></p> <p>componentWillUnmount   åº”ç”¨åœºæ™¯ æ¸…é™¤å®šæ—¶å™¨ç­‰ç­‰</p> <h2 id="react-å¦‚ä½•é˜»æ­¢ç»„ä»¶æ¸²æŸ“"><a href="#react-å¦‚ä½•é˜»æ­¢ç»„ä»¶æ¸²æŸ“" class="header-anchor">#</a> React å¦‚ä½•é˜»æ­¢ç»„ä»¶æ¸²æŸ“</h2> <p>ç±»ç»„ä»¶ ï¼ŒshouldComponentUpdate --&gt; è¿”å› true || false</p> <p>å½“ è¿”å›false æ—¶ å³ä¼šé˜»æ­¢ç»„ä»¶æ›´æ–°æ¸²æŸ“</p> <h2 id="hooks-usestate-æ•°æ®æ›´æ–°åŸç†"><a href="#hooks-usestate-æ•°æ®æ›´æ–°åŸç†" class="header-anchor">#</a> Hooks useState æ•°æ®æ›´æ–°åŸç†</h2> <p>åŸç† : hooks useStateï¼ˆåˆå§‹é»˜è®¤å€¼ï¼‰ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªuseStateéœ€è¦ä¼ é€’ä¸€ä¸ªé»˜è®¤å€¼ï¼Œusestate è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå½“æ•°æ®å‘ç”Ÿæ›´æ–°çš„æ—¶å€™ï¼Œusestate ä¼šåŸºäºä¸Šä¸€æ¬¡è®¡ç®—å®Œæˆåçš„æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸å†åŸºäºé»˜è®¤å€¼ç´¯åŠ </p> <h2 id="reacté«˜é˜¶ç»„ä»¶å®šä¹‰å’Œä½œç”¨"><a href="#reacté«˜é˜¶ç»„ä»¶å®šä¹‰å’Œä½œç”¨" class="header-anchor">#</a> Reacté«˜é˜¶ç»„ä»¶å®šä¹‰å’Œä½œç”¨</h2> <blockquote><h4 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="header-anchor">#</a> é«˜é˜¶å‡½æ•°</h4> <p>1ğŸ´ å®šä¹‰ ï¼šä¸€ä¸ªå‡½æ•° æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°  ï¼Œæˆ–è€…è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</p> <h4 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="header-anchor">#</a> é«˜é˜¶ç»„ä»¶</h4> <p>2ğŸ å®šä¹‰ ï¼š ä¸€ä¸ªç»„ä»¶ æ¥å—å‚æ•° ä¸º ç»„ä»¶ å¹¶ä¸”è¯¥ç»„ä»¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶</p> <p>ä½œç”¨  ç™»å½•é‰´æƒ props å¢å¼º  å°è£…å…¬å…±çš„åŠŸèƒ½</p></blockquote> <h2 id="react-ä¸­å¦‚ä½•å®ç°ä¸€ä¸ªé¢œè‰²ä¸»é¢˜åˆ‡æ¢"><a href="#react-ä¸­å¦‚ä½•å®ç°ä¸€ä¸ªé¢œè‰²ä¸»é¢˜åˆ‡æ¢" class="header-anchor">#</a> React ä¸­å¦‚ä½•å®ç°ä¸€ä¸ªé¢œè‰²ä¸»é¢˜åˆ‡æ¢?</h2> <blockquote><p>æ–¹å¼1ï¼šé€šè¿‡context å‘ä¸‹ä¼ é€’ ä¸»é¢˜è‰² è¿›è¡Œ æ›´æ”¹å¯¹åº”çš„ é¢œè‰²ä¸»é¢˜ï¼Œé€šè¿‡ HOCé«˜é˜¶ç»„ä»¶ è¿›è¡Œå°è£… consumenr å°†æä¾›çš„å€¼ ä¼ é€’ç»™ æ–°çš„ç»„ä»¶</p></blockquote> <div class="language-TSX extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> ThemeContext <span class="token keyword">from</span> <span class="token string">&quot;./themeColor&quot;</span>

<span class="token keyword">const</span> <span class="token function-variable function">withContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span>OriginComponent<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>
          value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">OriginComponent</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>value<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeContext.Consumer</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> withContext 
</code></pre></div><h2 id="reactä¸­partols-å’Œ-fragment"><a href="#reactä¸­partols-å’Œ-fragment" class="header-anchor">#</a> Reactä¸­Partols å’Œ Fragment</h2> <blockquote><p><strong>Partols</strong>  :å‡½æ•° å°†æŒ‡å®šçš„å…ƒç´  æŒ‚è½½åˆ°æŒ‡å®šçš„dom èŠ‚ç‚¹ä¸Š</p> <p>â€‹	å‚æ•°1 : ä¼ å…¥éœ€è¦æŒ‚è½½çš„å…ƒç´ </p> <p>â€‹	å‚æ•°2 ï¼š ä¼ å…¥éœ€è¦è¿½åŠ åˆ°å“ªé‡Œçš„dom å…ƒç´ èŠ‚ç‚¹</p> <p>â€‹	å‚æ•°3 ï¼š key ç¬¬å‡ ä¸ªå…ƒç´ </p> <p>Fragment : Vueä¸­çš„template å…ƒç´ </p></blockquote> <h2 id="react-ä¸­-strictmode-çš„ä½œç”¨"><a href="#react-ä¸­-strictmode-çš„ä½œç”¨" class="header-anchor">#</a> React ä¸­ StrictMode çš„ä½œç”¨</h2> <blockquote><p>1: è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ(å·²ç»åºŸå¼ƒç»´æŠ¤çš„ç”Ÿå‘½å‘¨æœŸ)</p> <p>2 ï¼šè¯†åˆ«ä»£ç ä¸­ä½¿ç”¨è¿‡æ—¶çš„Api</p> <p>3ï¼šæ£€æŸ¥æ„å¤–çš„å‰¯ä½œç”¨</p> <p>â€‹	3.1 ç»„ä»¶ constructor è¢«è°ƒç”¨ä¸¤æ¬¡</p></blockquote> <h2 id="ä½¿ç”¨-createcontext-å’Œ-usecontext-å®ç°è·¨ç»„ä»¶é€šä¿¡"><a href="#ä½¿ç”¨-createcontext-å’Œ-usecontext-å®ç°è·¨ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> ä½¿ç”¨ CreateContext å’Œ useContext å®ç°è·¨ç»„ä»¶é€šä¿¡</h2> <p><img src="/assets/img/1650207949278.d524a5fb.png" alt="1650207949278"></p> <blockquote><h4 id="usecontext-è·¨ç»„ä»¶å…±äº«æ•°æ®-å®ç°åŸç†"><a href="#usecontext-è·¨ç»„ä»¶å…±äº«æ•°æ®-å®ç°åŸç†" class="header-anchor">#</a> useContext è·¨ç»„ä»¶å…±äº«æ•°æ®  å®ç°åŸç†</h4> <p>1ï¼šç”Ÿäº§è€… ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æä¾›è€… ï¼ˆprovider ï¼‰</p> <p>2ï¼šæ¶ˆè´¹è€… ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä½¿ç”¨è€… ï¼ˆconsumer ï¼‰</p> <p>3ï¼šæ•°æ®ä¸­é—´ä»¶</p> <p>ä½¿ç”¨ä¸€ä¸ªå…¬å…±çš„JSæ–‡ä»¶ç”¨æ¥ä¿å­˜ æ•°æ®çš„çŠ¶æ€</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// æ•°æ®çŠ¶æ€ ä¸­é—´ä»¶ publicStateå˜é‡</span>
<span class="token keyword">const</span> publicState  <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// è¿”å›æ¶ˆè´¹è€… å’Œ ç”Ÿäº§è€…   </span>
</code></pre></div><h6 id="ç”Ÿäº§è€…-provider"><a href="#ç”Ÿäº§è€…-provider" class="header-anchor">#</a> ç”Ÿäº§è€… provider</h6> <div class="language-react extra-class"><pre class="language-text"><code>  &lt;CounterContext.Provider value={{   é€šè¿‡value æä¾›æ•°æ® å¹¶åŒ…è£¹ éœ€è¦ä¼ é€’æ•°æ®çš„ç»„ä»¶ 
       changeCount
     }}&lt;/CounterContext.Provide&gt;
</code></pre></div><h6 id="æ¶ˆè´¹è€…-consumer"><a href="#æ¶ˆè´¹è€…-consumer" class="header-anchor">#</a> æ¶ˆè´¹è€… consumer</h6> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// æ¥æ”¶æ•°æ® </span>
<span class="token comment">// é€šè¿‡  useContextæ¥æ”¶æ•°æ® useContext(ä¼ å…¥ä¸­é—´ä»¶ publicStateå˜é‡) å³å¯æ‹¿åˆ°ç”Ÿäº§è€…å‘å¸ƒçš„æ•°æ®</span>
<span class="token comment">// æ¶ˆè´¹è€…å³å¯ è¿›è¡Œä½¿ç”¨ </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>useContext<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> changeCount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>CounterContext<span class="token punctuation">)</span>
</code></pre></div></blockquote> <h2 id="class-setstate-å’Œ-hooks-setstate-çš„åŒºåˆ«"><a href="#class-setstate-å’Œ-hooks-setstate-çš„åŒºåˆ«" class="header-anchor">#</a> class setState å’Œ hooks setState çš„åŒºåˆ«</h2> <div class="language-TSX extra-class"><pre class="language-tsx"><code><span class="token comment">// 1ï¼šæ•°æ®æ›´æ”¹çš„æ–¹å¼ä¸åŒ</span>

<span class="token keyword">class</span> <span class="token class-name">ç±»ç»„ä»¶</span> æ›´æ–°state æ•°æ®  éœ€è¦é€šè¿‡ <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setstate</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setstate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

count<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">||</span> æˆ– <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setstate</span><span class="token punctuation">(</span>prevState<span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span><span class="token punctuation">{</span>count<span class="token operator">:</span>prevState<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å‡½æ•°ç»„ä»¶ setstate </span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span>setstate<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">usestate</span><span class="token punctuation">(</span>é»˜è®¤å€¼<span class="token punctuation">)</span>
<span class="token function">setstate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
æ›´æ–°çš„æ•°æ®
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">||</span> <span class="token function">setstate</span><span class="token punctuation">(</span> prev <span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> æ›´æ–°çš„æ•°æ®<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 2  æ•°æ®æ›´æ–°å¤„ç†ä¾èµ–æ”¶é›†ä¸åŒ</span>
<span class="token comment">//  ç±»ç»„ä»¶ this.setstate ä¼šé€šè¿‡ ä¸€æ¬¡æ€§æ”¶é›†æ‹¿åˆ°æœ€åä¸€æ¬¡æ›´æ–°çš„åŠ¨ä½œ</span>

<span class="token comment">// å‡½æ•°ç»„ä»¶ setstate æ¯ä¸€æ¬¡è°ƒç”¨ä¼šåŒæ­¥æ›´æ–°æ•°æ®</span>

<span class="token comment">/**
3ï¼š ä¼ é€’çš„å‚æ•°ä¸åŒ 
ç±»ç»„ä»¶ this.setstate å¯ä¼ é€’ä¸¤ä¸ªå‚æ•° 
å‚æ•°ä¸€  ä¼ é€’ä¸€ä¸ªæ›´æ–°åçš„å¯¹è±¡æˆ–å‡½æ•° 
å‚æ•°äºŒ  å›è°ƒå‡½æ•° è·å–æ›´æ–°åçš„æœ€æ–°å€¼

å‡½æ•°ç»„ä»¶ hooks setstate  
åªèƒ½ä¼ é€’ä¸€ä¸ªå‚æ•°
*/</span>

</code></pre></div><h2 id="reactçº¯å‡½æ•°"><a href="#reactçº¯å‡½æ•°" class="header-anchor">#</a> reactçº¯å‡½æ•°</h2> <ol><li>ä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Ÿï¼Ÿ</li></ol> <p>çº¯å‡½æ•° ï¼Œ å¯¹åº”çš„è¾“å…¥æœ‰å¯¹åº”çš„è¾“å‡ºï¼Œå‡½æ•°å†…ä¸å…è®¸æ›´æ”¹å¤–éƒ¨çš„å€¼ï¼Œå¤–éƒ¨ä¼ å…¥çš„å€¼ï¼Œæä¾›å‡½æ•°ä½¿ç”¨ï¼Œå¦‚æœå‡½æ•°å†…éƒ¨æ›´æ”¹äº†å€¼ï¼Œå°±æ‰“ç ´äº†çº¯å‡½æ•°æ¦‚å¿µã€‚</p> <h2 id="react-useeffectå‡½æ•°"><a href="#react-useeffectå‡½æ•°" class="header-anchor">#</a> react UseEffectå‡½æ•°</h2> <p>useEffect å‡½æ•° çš„è¿”å›å€¼ å¯ä»¥æ˜¯ void | callback | undefind</p> <p>å½“ useEffect å‡½æ•° è¿”å›å€¼ä¸ºä¸€ä¸ªå‡½æ•°æ—¶ ï¼Œ å‡½æ•°ä¼šåœ¨ ç»„ä»¶å¸è½½çš„æ—¶å€™è‡ªåŠ¨å›è°ƒ</p> <p>useEffect æ¥æ”¶ä¸¤ä¸ªå‚æ•°</p> <p>params1 ï¼š callback</p> <p>params ï¼š ä¾èµ–é¡¹ | []</p> <h2 id="reduxçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ"><a href="#reduxçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ" class="header-anchor">#</a> reduxçš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</h2> <ul><li><strong>action  åŠ¨ä½œ       action :æ‰§è¡Œæ´¾å‘çš„æŸäº›åŠ¨ä½œ è¿›è¡Œæ•°æ®æ“ä½œä»»åŠ¡æ´¾å‘</strong>****</li> <li><strong>storeæ•´åˆ action å’Œ reducer   (æ•°æ®ä»“åº“) çŠ¶æ€æ”¶é›†</strong></li> <li><strong>reducer æ•°æ®æ›´æ–°   å¯¹store æ•°æ®è¿›è¡Œæ“ä½œï¼Œæ›´æ–°ç­‰</strong></li></ul> <h2 id="redux-ä¸‰å¤§åŸåˆ™"><a href="#redux-ä¸‰å¤§åŸåˆ™" class="header-anchor">#</a> redux ä¸‰å¤§åŸåˆ™</h2> <ol><li>å•ä¸€æ•°æ®æº</li> <li>state æ˜¯åªè¯»çš„</li> <li>reducer çº¯å‡½æ•° ä¿®æ”¹æ•°æ®</li></ol> <h2 id="reactç±»ç»„ä»¶-ä¸­æ— æ³•é€šè¿‡jsè¿›è¡Œè·³è½¬è·¯ç”±å¦‚ä½•è§£å†³"><a href="#reactç±»ç»„ä»¶-ä¸­æ— æ³•é€šè¿‡jsè¿›è¡Œè·³è½¬è·¯ç”±å¦‚ä½•è§£å†³" class="header-anchor">#</a> reactç±»ç»„ä»¶ ä¸­æ— æ³•é€šè¿‡JSè¿›è¡Œè·³è½¬è·¯ç”±å¦‚ä½•è§£å†³ï¼Ÿ</h2> <p>ä½¿ç”¨ HOC é«˜é˜¶ç»„ä»¶ ï¼Œ å¯¹ç±»ç»„ä»¶è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶</p> <h2 id="ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶æ˜¯å¦‚ä½•ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€çš„"><a href="#ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶æ˜¯å¦‚ä½•ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€çš„" class="header-anchor">#</a> ç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶æ˜¯å¦‚ä½•ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€çš„ï¼Ÿ</h2> <p>1ï¼šç±»ç»„ä»¶å¯ä»¥åœ¨ç»„ä»¶å®ä¾‹ä¸­ä¿å­˜ä¸€äº›æ•°æ®åœ¨ thisèº«ä¸Š ï¼Œ è€Œ å‡½æ•°å¼ç»„ä»¶ æƒ³è¦ä¿ç•™çŠ¶æ€ä½ å¿…é¡»é€šè¿‡ useState</p> <h2 id="useeffect-å’Œ-uselayouteffect-çš„åŒºåˆ«"><a href="#useeffect-å’Œ-uselayouteffect-çš„åŒºåˆ«" class="header-anchor">#</a> useEffect å’Œ useLayoutEffect çš„åŒºåˆ«</h2> <div class="language-tsx extra-class"><pre class="language-tsx"><code>
useEffect <span class="token comment">// åœ¨ç»„ä»¶Domæ¸²æŸ“å®Œæˆä¹‹åè¿›è¡Œæ‰§è¡Œ</span>

useLayoutEffect <span class="token comment">// åœ¨ç»„å»ºdomæ¸²æŸ“ä¹‹å‰è¿›è¡Œè°ƒç”¨</span>

</code></pre></div><h2 id="useimperativehandleçš„ä½œç”¨"><a href="#useimperativehandleçš„ä½œç”¨" class="header-anchor">#</a> useImperativeHandleçš„ä½œç”¨</h2> <p>å¯ä»¥å°†æŒ‡å®šçš„ref çš„ <code>current</code> èº«ä¸Šè¿”å›æŒ‡å®šçš„å¯¹è±¡ï¼Œå¢åŠ äº†Domå¯æ“ä½œæ€§</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> memo<span class="token punctuation">,</span> useImperativeHandle<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ChildrenInput <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token literal-property property">ref</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foucs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token literal-property property">inputRef</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getFoucs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    inputRef<span class="token punctuation">.</span>current <span class="token operator">&amp;&amp;</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildrenInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildrenInput</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>getFoucs<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">getFoucs</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div><h2 id="ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Šå°æ‹¬å·"><a href="#ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Šå°æ‹¬å·" class="header-anchor">#</a> ç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Šå°æ‹¬å·()ï¼Ÿ</h2> <p>ç”±äºç®­å¤´å‡½æ•° ï¼ˆï¼‰=&gt;{å‡½æ•°ä½“}  è¿”å›æ‰§è¡Œçš„å‡½æ•°ä½“æœ¬èº«ä¹Ÿæ˜¯éœ€è¦{}åŒ…è£¹çš„ï¼Œä½œä¸ºä½œç”¨åŸŸï¼Œè€Œè¿”å›ä¸€ä¸ªå¯¹è±¡ä¹Ÿæ˜¯ {} æ­¤æ—¶ JSå¼•æ“å†…éƒ¨æ— æ³•è¯†åˆ«ï¼Œæ˜¯å¯¹è±¡è¿˜æ˜¯å‡½æ•°ä½“ç»“æ„åˆ’åˆ†ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ ç®­å¤´å‡½æ•° éœ€è¦åŠ ä¸Š å°æ‹¬å·   ( )=&gt; ({}) å³å¯</p> <h2 id="store-è®¢é˜…çŠ¶æ€çš„æ”¹å˜-å˜åŒ–"><a href="#store-è®¢é˜…çŠ¶æ€çš„æ”¹å˜-å˜åŒ–" class="header-anchor">#</a> Store è®¢é˜…çŠ¶æ€çš„æ”¹å˜ï¼ˆå˜åŒ–ï¼‰</h2> <blockquote><p><strong>reducer  ç†è®º</strong> : é€šè¿‡   const Store = createStore(reducer) å¯æ‹¿åˆ°store  ,createStore ä¼ é€’ä¸€ä¸ªreducer è¿›è¡Œæ•°æ®æ›´æ”¹ ï¼Œä¸ºäº†ä¿è¯reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•° ï¼Œå†…éƒ¨æ‰§è¡Œå¿…é¡»è¦æœ‰<strong>é»˜è®¤å€¼</strong> å’Œ  <strong>ä¸Šä¸€æ¬¡çš„çŠ¶æ€ï¼Œä¸å¯ç›´æ¥æ›´æ”¹</strong>ï¼Œæ²¡æœ‰åŒ¹é…çš„å¿…é¡»è¦è¿”å›æœ€åˆçš„state</p></blockquote> <blockquote><p>é€šè¿‡ Store.subscribe()æ–¹æ³•  è·å–è®¢é˜…çš„æ•°æ®ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°å³å¯æ‹¿åˆ° æ›´æ”¹çš„çŠ¶æ€ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°æ—¶è§¦å‘ï¼Œç±»ä¼¼äº class ç»„ä»¶ä¸­ componentditupdate() å‡½æ•°</p> <p>Store.subscribe() å‡½æ•°çš„è¿”å›å€¼  å¯æˆªæ–­å½“å‰è®¢é˜… å‘å¸ƒ ï¼Œåœ¨   Store.dispatch(increment(10))  åˆ†å‘action ä¹‹å‰å¯æˆªæ–­</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">redux_reducer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token parameter">payload</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token parameter">payload</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">,</span> payload <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> state <span class="token operator">+</span> action<span class="token punctuation">.</span>payload
      <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>
        <span class="token keyword">return</span> state <span class="token operator">-</span> action<span class="token punctuation">.</span>payload

      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token keyword">return</span> state
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> Store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span>
  <span class="token comment">// å‘å¸ƒè®¢é˜…  ç›‘å¬æ•°æ®å˜åŒ–  subscribe å‡½æ•° è¿”å›å€¼æ˜¯ä¸€ä¸ª å‡½æ•° å¯å–æ¶ˆè®¢é˜…ä¸­æ–­ç›‘å¬  subscribe æ–¹æ³•ç›‘å¬redux æ•°æ®æ›´æ–°</span>
  <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> Store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æœ€æ–°çŠ¶æ€ä¸ºSubscribe'</span><span class="token punctuation">,</span> Store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// æ‹¿åˆ°åˆå§‹å€¼ </span>
  <span class="token comment">// ä¸¤æ¬¡åˆ†å‘ reduxæ˜¯åŸºäºä¸Šä¸€æ¬¡çš„å€¼è¿›è¡Œæ›´æ”¹ </span>

  Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  Store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



</code></pre></div><h2 id="redux-æ‰§è¡Œæµç¨‹"><a href="#redux-æ‰§è¡Œæµç¨‹" class="header-anchor">#</a> Redux æ‰§è¡Œæµç¨‹</h2> <blockquote><p>const Store = createStore(reducer)</p> <p>redux åœ¨      const Store = createStore(reducer) åˆå§‹åŒ–æ—¶ redux  ä¼šå»è°ƒç”¨reducer æ›´æ–°çŠ¶æ€  æ‹¿åˆ° state çš„é»˜è®¤å€¼ ï¼Œå½“ ä»£ç æ‰§è¡Œ store.dispatch()æ—¶ æ­¤æ—¶ action å¯æ ¹æ®ä¸Šä¸€æ¬¡è·å–çš„å€¼è¿›è¡Œè®¡ç®—æ›´æ–°ï¼Œé€šè¿‡reducer æ‹¿åˆ°ä¸Šä¸€æ¬¡çš„çŠ¶æ€è¿›è¡Œæ›´æ–°å¹¶è¿”å›  å°†æ›´æ–°åçš„çŠ¶æ€é‡æ–°æäº¤ç»™ store å°†æ–°æ•°æ®è¿›è¡Œæ›¿æ¢</p></blockquote> <p><img src="/assets/img/1650550796599.87159099.png" alt="1650550796599"></p> <h2 id="reduxæ‰§è¡Œæµç¨‹å›¾"><a href="#reduxæ‰§è¡Œæµç¨‹å›¾" class="header-anchor">#</a> reduxæ‰§è¡Œæµç¨‹å›¾</h2> <p><img src="/assets/img/1650611863319.a8d1124b.png" alt="1650611863319"></p> <h2 id="reduxçš„æ•°æ®æµå‘"><a href="#reduxçš„æ•°æ®æµå‘" class="header-anchor">#</a> Reduxçš„æ•°æ®æµå‘</h2> <p>ç”¨æˆ·åœ¨UIå±‚å‘ç”Ÿè§†å›¾ç¼–è¾‘æ›´æ”¹ï¼Œredux å†…éƒ¨é€šè¿‡<strong>dispatch</strong> åˆ†å‘<strong>action</strong>  reducer åœ¨åˆ›å»º configureStoreæ—¶ è¿›è¡Œ state æ•°æ®åˆå§‹åŒ– ï¼Œå†æ‰§è¡Œ æŒ‡å®šçš„action  è¿›è¡Œreducer æ›´æ–°state    æœ€ç»ˆè¿”å›ç»™react UIé¡µé¢ï¼Œè¿›è¡Œæ¸²æŸ“</p> <h2 id="redux-ä¸­é—´ä»¶-æ‰§è¡Œæµç¨‹"><a href="#redux-ä¸­é—´ä»¶-æ‰§è¡Œæµç¨‹" class="header-anchor">#</a> Redux ä¸­é—´ä»¶ æ‰§è¡Œæµç¨‹</h2> <p><img src="/assets/img/1650721784106.cfb3a7b3.png" alt="1650721784106"></p> <h2 id="reduxé…ç½®æ•°æ®æŒä¹…åŒ–"><a href="#reduxé…ç½®æ•°æ®æŒä¹…åŒ–" class="header-anchor">#</a> Reduxé…ç½®æ•°æ®æŒä¹…åŒ–</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span>  <span class="token punctuation">{</span> configureStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@reduxjs/toolkit'</span> <span class="token comment">/// å¯¼å…¥ configureStore é…ç½®å•†åº—</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>RootReducer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/store/reducer&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//é…ç½®æ ¹ reducer  RootReducer </span>
<span class="token keyword">import</span>  thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>  <span class="token comment">// å¯¼å…¥thunk ä¸­é—´ä»¶</span>

<span class="token comment">// å¯¼å…¥æŒä¹…åŒ– æ•°æ®çš„Store å’Œ persistReducer(&quot;ä¼ å…¥é…ç½®å¯¹è±¡&quot;,'ä¼ å…¥RootReduce')</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> persistStore<span class="token punctuation">,</span> persistReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-persist'</span> 

<span class="token comment">// storage æ•°æ®å­˜å‚¨æœ¬åœ°å¯¹è±¡</span>
<span class="token keyword">import</span> storage <span class="token keyword">from</span> <span class="token string">'redux-persist/lib/storage'</span>

<span class="token comment">// é…ç½® persistConfig å¯¹è±¡</span>
<span class="token keyword">const</span> persistConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span><span class="token comment">// å­˜å‚¨å¯¹è±¡æ ¹èŠ‚ç‚¹</span>
    storage<span class="token punctuation">,</span>   <span class="token comment">// é‡‡ç”¨æœ¬åœ°ç¼“å­˜</span>
    <span class="token literal-property property">whitelist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'MainPageBaseInfo'</span><span class="token punctuation">]</span> <span class="token comment">// ç™½åå•ï¼Œä¾‹ï¼šåªæœ‰loginä¼šè¢«æŒä¹…åŒ–</span>
<span class="token punctuation">}</span>
<span class="token comment">// å°†reducer åŠ å…¥æŒä¹…åŒ–</span>
<span class="token keyword">const</span> persistedReducer <span class="token operator">=</span> <span class="token function">persistReducer</span><span class="token punctuation">(</span>persistConfig<span class="token punctuation">,</span>RootReducer<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">configureStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// å°†reducer æ”¾å…¥ store ä¸­</span>
    <span class="token literal-property property">reducer</span><span class="token operator">:</span>persistedReducer<span class="token punctuation">,</span>
    <span class="token comment">// å¼€å¯ devtools å·¥å…·</span>
    <span class="token literal-property property">devTools</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// é…ç½®thunk ä¸­é—´ä»¶</span>
    <span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token punctuation">[</span>thunk <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span>  <span class="token keyword">const</span> PersistStore <span class="token operator">=</span> <span class="token function">persistStore</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span>  store


<span class="token comment">// é¡¹ç›®è·Ÿç›®å½• index ä¸‹é…ç½®</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PersistGate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-persist/integration/react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PersistStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token punctuation">;</span>


    <span class="token operator">&lt;</span>PersistGate loading<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">null</span><span class="token punctuation">}</span> persistor<span class="token operator">=</span><span class="token punctuation">{</span>PersistStore<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>PersistGate<span class="token operator">&gt;</span>


</code></pre></div><h2 id="è§£å†³react-æ•°æ®æŒä¹…åŒ–-é…ç½®é”™è¯¯"><a href="#è§£å†³react-æ•°æ®æŒä¹…åŒ–-é…ç½®é”™è¯¯" class="header-anchor">#</a> è§£å†³react æ•°æ®æŒä¹…åŒ– é…ç½®é”™è¯¯</h2> <blockquote><p>https://github.com/rt2zz/redux-persist/issues/988</p> <p>è§£å†³æ–¹æ¡ˆ  é…ç½® middleware  ä»¥æ•°ç»„çš„æ–¹å¼åŠ å…¥</p> <p>https://redux-starter-kit.js.org/api/getdefaultmiddleware</p></blockquote> <p><img src="/assets/img/1652513662076.8a473381.png" alt="img"></p> <h2 id="reduxä¸­çš„æ€§èƒ½ä¼˜åŒ–"><a href="#reduxä¸­çš„æ€§èƒ½ä¼˜åŒ–" class="header-anchor">#</a> reduxä¸­çš„æ€§èƒ½ä¼˜åŒ–</h2> <h3 id="ä½¿ç”¨-useselector-è¿›è¡Œæ•°æ®è·å–çš„"><a href="#ä½¿ç”¨-useselector-è¿›è¡Œæ•°æ®è·å–çš„" class="header-anchor">#</a> ä½¿ç”¨ useSelector è¿›è¡Œæ•°æ®è·å–çš„</h3> <p>â€‹	<strong>æ€§èƒ½é—®é¢˜</strong> ï¼š è·å–reduxæ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœçˆ¶å­ç»„ä»¶éƒ½ç”¨åˆ°äº†åŒä¸€ä¸ªæ¨¡å—çš„æ•°æ®ï¼Œä½†æ­¤æ—¶ çˆ¶ç»„ä»¶å¯¹è¯¥æ¨¡å—ä¸€ä¸ªå±æ€§å€¼è¿›è¡Œ<code>dispath</code>ï¼Œå¯¼è‡´  <code>state</code> å‘ç”Ÿå˜åŒ– æ­¤æ—¶ å­ç»„ä»¶ä¹Ÿå‘ç”Ÿäº† <code>render</code></p> <p><strong>å¦‚ä½•ä¼˜åŒ–</strong> ï¼Ÿ</p> <p>æˆ‘ä»¬å¯ä»¥åœ¨ å­ç»„ä»¶ä½¿ç”¨çš„  <code>useSelector</code>è¿›è¡Œä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œ<code>shallowEqual</code>ï¼Œreact ä¼šè‡ªåŠ¨æ ¹æ®ä¸Šä¸€æ¬¡æ¨¡å—çš„æ•°æ®å’Œå½“å‰æ¨¡å—æ•°æ® æ˜¯å¦å‘ç”Ÿæ”¹å˜ ï¼Œ å¦‚æœå¼•ç”¨çš„å€¼å‘ç”Ÿäº†æ”¹å˜åˆ™è¯¥ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸éœ€è¦é‡æ–°æ¸²æŸ“ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> HomeChildren <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> couterModule</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>counter<span class="token punctuation">.</span>message<span class="token punctuation">,</span> shallowEqual<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;HomeChildren Render&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> children Component </span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/web/vue/vue3.html" class="prev">
        vue3
      </a></span> <span class="next"><a href="/web/node/Node.html">
        NodeJS
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.feb21b2a.js" defer></script><script src="/assets/js/2.75ba61f2.js" defer></script><script src="/assets/js/4.0a0d7342.js" defer></script>
  </body>
</html>
