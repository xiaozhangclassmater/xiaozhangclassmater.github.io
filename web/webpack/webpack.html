<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1：webpack基础篇</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.a90809c0.css" as="style"><link rel="preload" href="/assets/js/app.feb21b2a.js" as="script"><link rel="preload" href="/assets/js/2.75ba61f2.js" as="script"><link rel="preload" href="/assets/js/22.233bac0d.js" as="script"><link rel="prefetch" href="/assets/js/10.be2d4676.js"><link rel="prefetch" href="/assets/js/11.a6cdee63.js"><link rel="prefetch" href="/assets/js/12.f66c58d3.js"><link rel="prefetch" href="/assets/js/13.f6a7ab74.js"><link rel="prefetch" href="/assets/js/14.f2495746.js"><link rel="prefetch" href="/assets/js/15.501e6ef6.js"><link rel="prefetch" href="/assets/js/16.f88cdb61.js"><link rel="prefetch" href="/assets/js/17.cee20973.js"><link rel="prefetch" href="/assets/js/18.45990e00.js"><link rel="prefetch" href="/assets/js/19.c5e4d633.js"><link rel="prefetch" href="/assets/js/20.72e018c7.js"><link rel="prefetch" href="/assets/js/21.bc6f4b58.js"><link rel="prefetch" href="/assets/js/3.ec1e420f.js"><link rel="prefetch" href="/assets/js/4.0a0d7342.js"><link rel="prefetch" href="/assets/js/5.fb1d9eba.js"><link rel="prefetch" href="/assets/js/6.695dc6e3.js"><link rel="prefetch" href="/assets/js/7.f7cf561e.js"><link rel="prefetch" href="/assets/js/8.65918f4e.js"><link rel="prefetch" href="/assets/js/9.74b6acd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a90809c0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://xiaozhangclassmater.github.io/minivueBarrage-docs-web/#/dashboard" target="_self" class="nav-link external">
  首页
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web知识广场" class="dropdown-title"><span class="title">web知识广场</span> <span class="arrow down"></span></button> <button type="button" aria-label="web知识广场" class="mobile-dropdown-title"><span class="title">web知识广场</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/javascript/javascript.html" class="nav-link">
  JavaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/vue/vue3.html" class="nav-link">
  vue笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/React/React.html" class="nav-link">
  react笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/webpack/webpack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  webpack笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/Browser/Browser.html" class="nav-link">
  浏览器笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJs系列" class="dropdown-title"><span class="title">NodeJs系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJs系列" class="mobile-dropdown-title"><span class="title">NodeJs系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/node/Node.html" class="nav-link">
  NodeJS笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/ORM/ORM.html" class="nav-link">
  Node_ORM框架笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/express/express.html" class="nav-link">
  express笔记
</a></li></ul></div></div><div class="nav-item"><a href="/web/sql/mysql.html" class="nav-link">
  sql笔记
</a></div><div class="nav-item"><a href="/web/netWork/netWork.html" class="nav-link">
  计算机网络笔记
</a></div><div class="nav-item"><a href="/web/InterviewQuestion/InterviewQuestion.html" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/web/studyNote/studyNote.html" class="nav-link">
  工作笔记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://xiaozhangclassmater.github.io/minivueBarrage-docs-web/#/dashboard" target="_self" class="nav-link external">
  首页
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web知识广场" class="dropdown-title"><span class="title">web知识广场</span> <span class="arrow down"></span></button> <button type="button" aria-label="web知识广场" class="mobile-dropdown-title"><span class="title">web知识广场</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/javascript/javascript.html" class="nav-link">
  JavaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/vue/vue3.html" class="nav-link">
  vue笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/React/React.html" class="nav-link">
  react笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/webpack/webpack.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  webpack笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/Browser/Browser.html" class="nav-link">
  浏览器笔记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJs系列" class="dropdown-title"><span class="title">NodeJs系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="NodeJs系列" class="mobile-dropdown-title"><span class="title">NodeJs系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/node/Node.html" class="nav-link">
  NodeJS笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/ORM/ORM.html" class="nav-link">
  Node_ORM框架笔记
</a></li><li class="dropdown-item"><!----> <a href="/web/express/express.html" class="nav-link">
  express笔记
</a></li></ul></div></div><div class="nav-item"><a href="/web/sql/mysql.html" class="nav-link">
  sql笔记
</a></div><div class="nav-item"><a href="/web/netWork/netWork.html" class="nav-link">
  计算机网络笔记
</a></div><div class="nav-item"><a href="/web/InterviewQuestion/InterviewQuestion.html" class="nav-link">
  面试题
</a></div><div class="nav-item"><a href="/web/studyNote/studyNote.html" class="nav-link">
  工作笔记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/" class="sidebar-heading clickable router-link-active"><span>快速上手</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>个人笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/web/webpack/webpack.html" aria-current="page" class="active sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack启动一个服务" class="sidebar-link">webpack启动一个服务</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-中如何配置打包-指定的入口文件" class="sidebar-link">webpack 中如何配置打包 指定的入口文件？</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#npm-与-npx-的区别" class="sidebar-link">npm 与 npx 的区别 ?</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-开启自动编译的三种模式" class="sidebar-link">webpack 开启自动编译的三种模式</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#html-webpack-plugin-和-webpack-dev-middleware-的作用" class="sidebar-link">Html-Webpack-plugin 和 webpack-dev-middleware 的作用</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-loader-的作用" class="sidebar-link">webpack loader 的作用</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#javascript-scourse-map-的作用" class="sidebar-link">javascript scourse map 的作用</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#bannerplugin-和-clean-webpack-plugin和-cpoy-webpack-plugin" class="sidebar-link">bannerPlugin 和 clean-webpack-plugin和 cpoy-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack中如何对html文件中引入的资源进行打包" class="sidebar-link">webpack中如何对html文件中引入的资源进行打包</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-对多个html页面进行打包。" class="sidebar-link">webpack 对多个html页面进行打包。</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#第三方库-webpack-引入-注入到全局" class="sidebar-link">第三方库 webpack 引入 注入到全局</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-区分环境打包配置" class="sidebar-link">webpack 区分环境打包配置</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack跨域解决方案" class="sidebar-link">webpack跨域解决方案</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack性能优化" class="sidebar-link">webpack性能优化</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-将css打包并抽取到单独文件" class="sidebar-link">webpack 将css打包并抽取到单独文件</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack处理css兼容性问题-自动加上前缀" class="sidebar-link">webpack处理css兼容性问题，自动加上前缀</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#使用-cssminimizerwebpackplugin-对css进行压缩-优化" class="sidebar-link">使用 CssMinimizerWebpackPlugin 对css进行压缩(优化)</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#codespliting对js进行代码分割优化" class="sidebar-link">CodeSpliting对JS进行代码分割优化</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#优化webpack构建性能-noparse" class="sidebar-link">优化webpack构建性能-noparse</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#使用ignoreplugin插件进行构建性能优化" class="sidebar-link">使用ignorePlugin插件进行构建性能优化</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#使用-dllpugin-和-dllreference-进行构建优化" class="sidebar-link">使用 dllPugin 和 dllReference 进行构建优化</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#使用boundleanalysis进行打包分析" class="sidebar-link">使用boundleAnalysis进行打包分析</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#使用-prefetching-优化首屏加载速度" class="sidebar-link">使用 prefetching 优化首屏加载速度</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#prefetch和-preload的区别" class="sidebar-link">prefetch和 preload的区别</a></li><li class="sidebar-sub-header"><a href="/web/webpack/webpack.html#webpack-构建流程分析" class="sidebar-link">webpack 构建流程分析</a></li></ul></li><li><a href="/web/vue/vue3.html" class="sidebar-link">vue3</a></li><li><a href="/web/React/React.html" class="sidebar-link">React</a></li><li><a href="/web/node/Node.html" class="sidebar-link">NodeJS</a></li><li><a href="/web/sql/mysql.html" class="sidebar-link">Mysql</a></li><li><a href="/web/ORM/ORM.html" class="sidebar-link">Node_ORM</a></li><li><a href="/web/express/express.html" class="sidebar-link">express</a></li><li><a href="/web/Browser/Browser.html" class="sidebar-link">Browser</a></li><li><a href="/web/InterviewQuestion/InterviewQuestion.html" class="sidebar-link">面试题</a></li><li><a href="/web/netWork/netWork.html" class="sidebar-link">计算机网络</a></li><li><a href="/web/studyNote/studyNote.html" class="sidebar-link">工作笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-webpack基础篇"><a href="#_1-webpack基础篇" class="header-anchor">#</a> 1：webpack基础篇</h1> <h2 id="webpack启动一个服务"><a href="#webpack启动一个服务" class="header-anchor">#</a> webpack启动一个服务</h2> <p>webpack 启动一个服务的必要因素</p> <p>1：需要 webpack-dev-serve 插件的支持</p> <p>2：webpack-CLI 的脚手架包支持</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-serve --config ./webpack.config.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].js'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpack-中如何配置打包-指定的入口文件"><a href="#webpack-中如何配置打包-指定的入口文件" class="header-anchor">#</a> webpack 中如何配置打包 指定的入口文件？</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry ： <span class="token string">'需要打包的文件入口路径'</span><span class="token punctuation">,</span>
    output ： <span class="token punctuation">{</span>
        path ： 绝对路径，
        pathname ：<span class="token string">''</span> <span class="token comment">// 打包的文件别名</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h2 id="npm-与-npx-的区别"><a href="#npm-与-npx-的区别" class="header-anchor">#</a> npm 与 npx 的区别 ?</h2> <p>npm 主要是对包的资源进行下载 ，或者设置镜像地址等</p> <p>在 node 5.2 以后 安装 node 自带一个 npx 指令 ， npx 会从当前项目的node_modules 中寻找对应的资源执行代码</p> <h2 id="webpack-开启自动编译的三种模式"><a href="#webpack-开启自动编译的三种模式" class="header-anchor">#</a> webpack 开启自动编译的三种模式</h2> <p>1 ： webpack --watch</p> <p>2： webpack-dev-server</p> <p>3:    watch选项</p> <h3 id="通过-watch"><a href="#通过-watch" class="header-anchor">#</a> 通过 --watch</h3> <p>​	通过执行 webpack --watch  命令实现 自动编译</p> <div class="language-JS extra-class"><pre class="language-js"><code>    <span class="token string-property property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span>
</code></pre></div><h3 id="通过-配置-watch-选项"><a href="#通过-配置-watch-选项" class="header-anchor">#</a> 通过 配置 watch 选项</h3> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span> <span class="token operator">:</span>  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'./dist/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'bound.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span> <span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span> <span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 配置watch 选项</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="通过插件-webpack-dev-server"><a href="#通过插件-webpack-dev-server" class="header-anchor">#</a> 通过插件 webpack-dev-server</h3> <div class="language-HTML extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-JS extra-class"><pre class="language-js"><code><span class="token number">1</span><span class="token operator">:</span>下载插件
<span class="token comment">// npm install webpack-dev-server -D</span>

<span class="token comment">// webpack5.0 之后配置 找到服务启动的静态资源</span>
 <span class="token literal-property property">devServer</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token operator">:</span> <span class="token string">'./dist/index.html'</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h2 id="html-webpack-plugin-和-webpack-dev-middleware-的作用"><a href="#html-webpack-plugin-和-webpack-dev-middleware-的作用" class="header-anchor">#</a> Html-Webpack-plugin 和 webpack-dev-middleware 的作用</h2> <p><code>Html-Webpack-plugin</code> : 将 指定的html模板文件作为一个新的html放入到指定目录，并自动引入打包完成的JS文件</p> <p><code>webpack-dev-middleware</code> : 将webpack.config.js 文件的配置 作为配置项，给到中间件 进行编译，并开启一台服务器</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token literal-property property">plgins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span> <span class="token operator">:</span> <span class="token string">'./index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="webpack-loader-的作用"><a href="#webpack-loader-的作用" class="header-anchor">#</a> webpack loader 的作用</h2> <h3 id="_1-style-loader-与-css-loader-的区别"><a href="#_1-style-loader-与-css-loader-的区别" class="header-anchor">#</a> <strong>1:style-loader 与 css-loader 的区别 ？</strong></h3> <p>css-loader : 将 css 进行解析</p> <p>style-loader ： 将样式 插入到html style 标签里</p> <h3 id="styles-css-loader-的解析顺序"><a href="#styles-css-loader-的解析顺序" class="header-anchor">#</a> styles | css loader 的解析顺序</h3> <p>webpack 打包 解析 loader ，从右到左进行执行。</p> <h3 id="config"><a href="#config" class="header-anchor">#</a> config</h3> <div class="language-JS extra-class"><pre class="language-js"><code> <span class="token literal-property property">module</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span> <span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span> <span class="token punctuation">,</span> <span class="token string">'css-loader'</span> <span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h3> <p>主要作用 将 es6 的js 代码 转换为 es5 的 代码</p> <div class="language-JS extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span> 
     <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
       <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
         <span class="token literal-property property">plugin</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/env'</span><span class="token punctuation">]</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">exclude</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>

 <span class="token punctuation">}</span>
</code></pre></div><h2 id="javascript-scourse-map-的作用"><a href="#javascript-scourse-map-的作用" class="header-anchor">#</a> javascript scourse map 的作用</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 主要功能方便代码调试 能够精准的定位打印的行数</span>
devTool： <span class="token string">'eval'</span>

</code></pre></div><h2 id="bannerplugin-和-clean-webpack-plugin和-cpoy-webpack-plugin"><a href="#bannerplugin-和-clean-webpack-plugin和-cpoy-webpack-plugin" class="header-anchor">#</a> bannerPlugin 和 clean-webpack-plugin和 cpoy-webpack-plugin</h2> <h3 id="bannerplugin"><a href="#bannerplugin" class="header-anchor">#</a> bannerPlugin</h3> <p>​	对 打包的js文件 在首行 添加指定的注释 （插件）</p> <h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> clean-webpack-plugin</h3> <p>​	功能： 自动清除 打包完成后的 dist 目录</p> <h3 id="cpoy-webpack-plugin"><a href="#cpoy-webpack-plugin" class="header-anchor">#</a> cpoy-webpack-plugin</h3> <p>​	功能 ： 复制指定的文件 到指定的 目录 ，主要作用是 未参与 webpack 打包的文件 进行复制</p> <p><strong>配置</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> copyWebpackPlugin <span class="token operator">=</span>  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cpoy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">copyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">patterns</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">from</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token literal-property property">to</span> <span class="token operator">:</span> <span class="token string">'assets'</span> <span class="token comment">// 复制到哪里 ， 可支持 相对路径 和 绝对路径</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="webpack中如何对html文件中引入的资源进行打包"><a href="#webpack中如何对html文件中引入的资源进行打包" class="header-anchor">#</a> webpack中如何对html文件中引入的资源进行打包</h2> <h3 id="使用-html-withimg-loader-对-html文件中的静态资源进行打包"><a href="#使用-html-withimg-loader-对-html文件中的静态资源进行打包" class="header-anchor">#</a> 使用 html-withimg-loader 对 html文件中的静态资源进行打包</h3> <div class="language-JS extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span>
        <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h1 id="_2-wenpack进阶篇"><a href="#_2-wenpack进阶篇" class="header-anchor">#</a> 2：wenpack进阶篇</h1> <h2 id="webpack-对多个html页面进行打包。"><a href="#webpack-对多个html页面进行打包。" class="header-anchor">#</a> webpack 对多个html页面进行打包。</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//在 entry 配置对象中 </span>
entry ： <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span> <span class="token operator">:</span> ‘<span class="token punctuation">.</span><span class="token operator">/</span>index<span class="token punctuation">.</span>js’ <span class="token comment">// 主入口js文件</span>
    <span class="token literal-property property">other</span> <span class="token operator">:</span> <span class="token string">'./other.js'</span> <span class="token comment">// other文件 </span>
<span class="token punctuation">}</span>
<span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
 <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span> <span class="token operator">:</span> <span class="token string">'./index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>  <span class="token comment">// 打包完成的 html 需要引入哪个js文件</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'other.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span> <span class="token operator">:</span> <span class="token string">'./other.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 打包完成的 html 需要 引入哪个js文件</span>
      <span class="token literal-property property">chunks</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'other'</span><span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="第三方库-webpack-引入-注入到全局"><a href="#第三方库-webpack-引入-注入到全局" class="header-anchor">#</a> 第三方库 webpack 引入 注入到全局</h2> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
     <span class="token comment">// 将三方包注入 全局变量中</span>
 <span class="token literal-property property">test</span> <span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'expose-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">exposes</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'$'</span><span class="token punctuation">,</span><span class="token string">'jquery'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>或者通过 webpack 内部插件 进行 注入<code>webpack.ProvidePlugin</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">$</span><span class="token operator">:</span><span class="token string">'jquery'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jquery</span> <span class="token operator">:</span> <span class="token string">'jquery'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="webpack-区分环境打包配置"><a href="#webpack-区分环境打包配置" class="header-anchor">#</a> webpack 区分环境打包配置</h2> <p>webpack 如何根据 不同环境 进行 不同配置打包？</p> <p>​	我们可以将 webpack 打包配置 分为  <code>webpack.prod,js</code>  ， <code>webpack.dev.js</code> , <code>webpack.base.js</code></p> <h3 id="webpack-base-js"><a href="#webpack-base-js" class="header-anchor">#</a> webpack.base.js</h3> <p>​	该文件配置打包的基本配置 ， webpack 提供了 <code>merge</code>函数，可以将多个配置进行合并</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> CpoyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> webpack <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 多页应用打包</span>
  <span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span> <span class="token operator">:</span>  <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">other</span> <span class="token operator">:</span> <span class="token string">'./src/other.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span> <span class="token operator">:</span>  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span><span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'./dist/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'[name].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span> <span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span> <span class="token punctuation">,</span> <span class="token string">'css-loader'</span> <span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 配置 file-loader 解析文件 </span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpeg|jpg|bmp)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">limit</span> <span class="token operator">:</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            <span class="token literal-property property">outputPath</span> <span class="token operator">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'[name].[ext]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> 
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>

        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
        
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(htm|html)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'html-withimg-loader'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 将三方包注入 全局变量中</span>
        <span class="token literal-property property">test</span> <span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'expose-loader'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">exposes</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'$'</span><span class="token punctuation">,</span><span class="token string">'jquery'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//  配置多个 html页面打包</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span> <span class="token operator">:</span> <span class="token string">'./index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'other.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span> <span class="token operator">:</span> <span class="token string">'./other.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 打包完成的 html 需要 引入哪个js文件</span>
      <span class="token literal-property property">chunks</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'other'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CpoyWebpackPlugin</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">patterns</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">from</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'..'</span> <span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">to</span> <span class="token operator">:</span> <span class="token string">'assets'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="webpack-dev-js"><a href="#webpack-dev-js" class="header-anchor">#</a> webpack.dev.js</h3> <p>该文件中 ， 通常是编写开发环境的配置，例如配置 sourceMap ， devServer 等</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>  <span class="token comment">// webpack 提供 merge ，当然你需要先下载 npm install webpack-merge</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 合并 基础配置 和 dev 配置 </span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig <span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">open</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">hot</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">dev</span> <span class="token operator">:</span> <span class="token string">'true'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span> <span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span> <span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre></div><h3 id="webpack-prod-js"><a href="#webpack-prod-js" class="header-anchor">#</a> webpack.prod.js</h3> <p>该文件 通常配置 生产时需要的一些配置</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> baseConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>baseConfig <span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span> <span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span> <span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token comment">// 注入 变量到全局 ，便于环境配置 </span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 注意 此时 value 是当作 表达式去执行的 ，如果你希望 true 是字符串 你需要 '&quot;true&quot;' 这样编写</span>
      <span class="token literal-property property">dev</span> <span class="token operator">:</span> <span class="token string">'false'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devtool</span> <span class="token operator">:</span> <span class="token string">'cheap-module-source-map'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  
</code></pre></div><h2 id="webpack跨域解决方案"><a href="#webpack跨域解决方案" class="header-anchor">#</a> webpack跨域解决方案</h2> <h3 id="什么是跨域"><a href="#什么是跨域" class="header-anchor">#</a> 什么是跨域 ？</h3> <p>出于浏览器的同源策略限制。同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。可以说Web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。同源策略会阻止一个域的。javascript脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号</p> <h3 id="前端解决跨域方案"><a href="#前端解决跨域方案" class="header-anchor">#</a> 前端解决跨域方案</h3> <h4 id="使用-代理进行跨域解决"><a href="#使用-代理进行跨域解决" class="header-anchor">#</a> 使用 代理进行跨域解决</h4> <p>​	出现时机 ： 一般出现在 开发时，上线后前端代码与后端代码在一台服务器上，因此不会出现跨域</p> <p>​	<strong>原理</strong> ： 项目在本地通过开启一台服务器，由服务器转发到服务端，同源策略只是在浏览器与服务器之间的一种限制，服务器与服务器之前不会进行同源策略限制，因此我们在本地接口像本地服务器发送，本地服务器再向服务端发送，就可以解决跨域。</p> <h4 id="利用jsonp进行跨域解决"><a href="#利用jsonp进行跨域解决" class="header-anchor">#</a> 利用JSONP进行跨域解决</h4> <p><strong>原理</strong> ： jsonp 原理 就是 ， 通过动态创建 script 标签 进行请求服务端 ，然后将 参数拼接到 script src 路径上进行请求。</p> <h4 id="使用nginx-代理进行跨域解决"><a href="#使用nginx-代理进行跨域解决" class="header-anchor">#</a> 使用nginx 代理进行跨域解决</h4> <p><strong>原理</strong> ： 客户端向服务器进行请求发送，由于nginx 的代理，可以将指定的路径代理到指定的服务器，然后响应处理，即可解决跨域。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    
    devServer ：<span class="token punctuation">{</span>
      <span class="token literal-property property">proxy</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'/api'</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">target</span> <span class="token operator">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token punctuation">}</span>
    	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_3-webpack优化篇"><a href="#_3-webpack优化篇" class="header-anchor">#</a> 3：webpack优化篇</h1> <h2 id="webpack性能优化"><a href="#webpack性能优化" class="header-anchor">#</a> webpack性能优化</h2> <h3 id="webpack中的-treeshaking-和-scoped-hoisting"><a href="#webpack中的-treeshaking-和-scoped-hoisting" class="header-anchor">#</a> webpack中的 treeshaking 和 scoped-hoisting</h3> <h4 id="_13-1-1-tree-shaking-摇树优化"><a href="#_13-1-1-tree-shaking-摇树优化" class="header-anchor">#</a> <strong>13.1.1 tree Shaking（摇树优化）</strong></h4> <p>webpack 会根据当前的环境，来决定打包完的代码是否需要压缩，当在开发环境下时，代码是不会进行压缩，</p> <p>如果，你的代码需要进行手动配置 <code>tree shaking</code> ，那你可以在 <code>package.json</code>文件中，添加 <code>side-effect-free</code> 选项，如果打包的代码不包含副作用，那webpack会自动 删除 未使用并export 的代码</p> <p>​      <strong>1： webpack中的 <code>sideEffects</code>  和 <code>usedExports</code> 的区别</strong>。</p> <p>sideEffects 会根据你设置的文件，去进行treeShking，如果你没有副作用文件，那webpack将会将所有的代码进行treeShaking。</p> <p>useExports ，是依赖于 <code>terser</code> 去检测语句中的副作用，但terser 在每次解析的时候也无法确认哪些代码是需要的还是不需要的，因为js是一门动态语言，如果你想要指定哪些代码被 <code>treeShking</code>，你可以在代码 上添加 <code>/*#__PURE__*/</code>  进行标志。</p> <h4 id="scoped-hoisting-优化"><a href="#scoped-hoisting-优化" class="header-anchor">#</a> scoped-hoisting 优化</h4> <p><strong>作用</strong>： scoped-hoisting 可以在webpack打包构建的时候，进行分析，将一些函数运算结果计算完成后返回给你，以提高性能。</p> <p>​	例如 ：</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter">a <span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b 
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function">sub</span> <span class="token punctuation">(</span><span class="token parameter">a <span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> a <span class="token operator">-</span> b 
<span class="token punctuation">}</span>
<span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token function">sub</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>对于 <code>webpack</code>来说 这段代码会变成 这个样子，并且add | sub 函数被删除。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;输出的结果add&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;输出的结果sub&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> e<span class="token operator">-</span>t<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="webpack-将css打包并抽取到单独文件"><a href="#webpack-将css打包并抽取到单独文件" class="header-anchor">#</a> webpack 将css打包并抽取到单独文件</h2> <p>作用 ： 将css打包后生成css文件，进行引入，不需要在通过 <code>style-loader</code> 创建style 标签，并插入内容</p> <p>​	<strong>配置</strong>l</p> <p>我们可以借助 <code>MiniCssExtractPlugin</code> 插件，来进行对css进行管理,并且，如果你是将css单独打包到文件中去时，你需要将<code>style.loader</code>  更换为 <code>MiniCssExtractPlugin.loader</code> 这样css才能生效。</p> <p>​	<strong>注意事项(warring)</strong></p> <p>对于 css <code>source map</code> 只在 <code>source-map/nosources-source-map/hidden-nosources-source-map/hidden-source-map</code> 值情况下起作用，因为 CSS 仅支持带有 <code>sourceMappingURL</code> 注释的 <code>source map</code> (例如 //# sourceMappingURL=style.css.map)。如果你需要将 devtool 设置为其他值，你可以使用 css-loader 中的 sourceMap: true 来启用提取并生成 CSS 的 source map。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
module ： <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">test</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span> <span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span><span class="token string">'css-loader'</span> <span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>
       <span class="token literal-property property">chunkFilename</span> <span class="token operator">:</span> <span class="token string">'[name].css'</span> <span class="token comment">// 将打包完成的css 进行 拆分 ，分为每一个小模块，并生成对应的css文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="webpack处理css兼容性问题-自动加上前缀"><a href="#webpack处理css兼容性问题-自动加上前缀" class="header-anchor">#</a> webpack处理css兼容性问题，自动加上前缀</h2> <p>作用 ： 处理一些css新属性，兼容  chrom <code>webkit</code>，<code>-moz</code>兼容火狐等等。</p> <div class="language- extra-class"><pre><code>配置 
</code></pre></div><p>安装 <code>postcss-loader</code> ，<code>autoprefixer</code>，<code>postcss-preset-env</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// postCss.config,js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>   
    
<span class="token punctuation">}</span>

<span class="token comment">// webpack.config.js  中配置</span>

<span class="token punctuation">{</span>
   <span class="token literal-property property">loader</span> <span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
   <span class="token literal-property property">options</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">postcssOptions</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>匹配规则</strong></p> <p>​	<code>postcss-loader</code>必须在 less-loader 或者 sass-loader 之前，因为，webpack打包借助 less | sass loader 解析完成后，再对css进行添加前缀。</p> <p><strong>注意事项（warring）</strong></p> <p>webpack5之后，如果你想要对css自动添加前缀，你还需要额外在<code>package.json文件中</code>，添加对应的浏览器版本控制，这样才能生效。</p> <div class="language-json extra-class"><pre class="language-json"><code> <span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;defaults&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;not ie &lt; 11&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;iOS 7&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;last 3 iOS versions&quot;</span>
  <span class="token punctuation">]</span>
</code></pre></div><h2 id="使用-cssminimizerwebpackplugin-对css进行压缩-优化"><a href="#使用-cssminimizerwebpackplugin-对css进行压缩-优化" class="header-anchor">#</a> 使用 CssMinimizerWebpackPlugin 对css进行压缩(优化)</h2> <p><strong>作用</strong> ：压缩css，优化性能；</p> <p>​	<strong>配置</strong></p> <p>**安装插件 **</p> <div class="language-node extra-class"><pre class="language-text"><code>yarn add css-minimizer-webpack-plugin -D 
</code></pre></div><p><strong>编写配置</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> CssMinimizerWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'css-minimizer-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token comment">//在生产上进行配置，在我们平时开发中打包，无需压缩</span>
<span class="token literal-property property">optimization</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimizer</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果你需要在开发环境下也s进行压缩 ，你需要配置</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
       <span class="token literal-property property">optimization</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
       		<span class="token literal-property property">minimize</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           include <span class="token comment">// 包含哪些进行压缩</span>
           exclude <span class="token comment">// 哪些不进行压缩</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意(warring)</strong></p> <p>​	css压缩和js压缩在生产环境下是webpack自带的优化性能的配置选项，如果你手动去配置了css压缩，那将会覆盖原有的默认配置，js压缩也将会失效，你需要配置 <code>terserPlugin</code>对js进行压缩。</p> <p>​	在 webpack4以前js压缩采用的是 <code>ugliflyJSPlugin</code> 进行压缩，在webpack5中 准备了一款开箱即用的插件<code>terserPlugin</code>。</p> <h2 id="codespliting对js进行代码分割优化"><a href="#codespliting对js进行代码分割优化" class="header-anchor">#</a> CodeSpliting对JS进行代码分割优化</h2> <p><strong>作用</strong> ： 将业务代码，根据设置的大小进行文件拆分，不需要一次请求，请求很大的文件。</p> <p>​	<strong>配置</strong></p> <p><strong>方式一</strong> : 通过多入口，多出口打包，进行代码分割</p> <div class="language-JS extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">index</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">import</span> <span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">dependOn</span> <span class="token operator">:</span> <span class="token string">'shared'</span><span class="token punctuation">,</span> <span class="token comment">// 指定用提取出来的公共文件</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">other</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">import</span> <span class="token operator">:</span> <span class="token string">'./src/other.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">dependOn</span> <span class="token operator">:</span> <span class="token string">'shared'</span><span class="token punctuation">,</span> <span class="token comment">// 指定用提取出来的公共文件</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">share</span> <span class="token operator">:</span> <span class="token string">'lodash'</span> <span class="token comment">// 将公共的库抽取到一个 shared.bundle.js</span>
	<span class="token punctuation">}</span>
    output ： <span class="token punctuation">{</span>
    	<span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'[name].boundle,js'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>方式二</strong> :  使用 <code>splitChunksPlugin</code> 进行代码拆分</p> <p>在webpack4之前采用的是 <code>CommonsChunkPlugin</code>，webpack4开始，已经移除了<code>CommonsChunkPlugin</code>，采用<code>optimization.splitChunks</code> `</p> <p><strong>触发条件</strong></p> <p>webpack 将根据以下条件自动拆分 chunks：</p> <ul><li>新的 chunk 可以被共享，或者模块来自于 <code>node_modules</code> 文件夹</li> <li>新的 chunk 体积大于 20kb（在进行 min+gz 之前的体积）</li> <li>当按需加载 chunks 时，并行请求的最大数量小于或等于 30</li> <li>当加载初始化页面时，并发请求的最大数量小于或等于 30</li></ul> <p>当尝试满足最后两个条件时，最好使用较大的 chunks。</p> <p><strong>配置</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span> <span class="token comment">// 可选的值  all , async , initial</span>
      <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span> <span class="token comment">// 模块大于 20 kb才进行拆分</span>
      <span class="token literal-property property">minRemainingSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 在 webpack 5 中引入了 splitChunks.minRemainingSize 选项，通过确保拆分后剩余的最小 chunk 体积超过限制来避免大小为零的模块。 'development' 模式 中默认为 0。对于其他情况，splitChunks.minRemainingSize 默认为 splitChunks.minSize 的值，因此除需要深度控制的极少数情况外，不需要手动指定它</span>
      <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 模块至少被引用一次才被拆分</span>
      <span class="token literal-property property">maxAsyncRequests</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// 最大的异步请求 不能超过30 个 超过30 个 不对代码进行拆分</span>
      <span class="token literal-property property">maxInitialRequests</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">// 入口点的最大并行请求数，超过30个不拆分</span>
      <span class="token literal-property property">enforceSizeThreshold</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token comment">// 强制执行拆分的体积阈值和其他限制，就是按照文件多少大小进行拆分</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 缓存组</span>
        <span class="token literal-property property">defaultVendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 权重</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当模块之间相互引用同一个模块时，reuseExistingChunk会单独拆分出一个模块出来</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>异步导入自动分割（codeSpliting）</strong></p> <p>​	当我们在项目中，使用<code>import</code>函数进行异步导入时，webpack打包该文件会自动<code>codeSpliting</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySeletor</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span>rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span> <span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="优化webpack构建性能-noparse"><a href="#优化webpack构建性能-noparse" class="header-anchor">#</a> 优化webpack构建性能-noparse</h2> <p>webpack中，有些模块未使用第三方包，或者 <code>import</code> , <code>require</code>, <code>define</code>，其他导入机制，我们可以配置no-parse，进行优化提高构建性能</p> <p><strong>注意（warring）</strong></p> <p>如果你在模块中，运用了第三方资源或者导入，那我建议你不要编写该配置，否则会出现不可预知的错误。</p> <p><strong>配置</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">noParse</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery|lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 不对 jqurey或者lodash 进行模块分析</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="使用ignoreplugin插件进行构建性能优化"><a href="#使用ignoreplugin插件进行构建性能优化" class="header-anchor">#</a> 使用ignorePlugin插件进行构建性能优化</h2> <p><strong>作用</strong>：可以将一些三方资源包中的未使用的包忽略，不对它进行构建</p> <p>​	<strong>类型</strong></p> <p>webpack 内置插件，忽略匹配到的文件，不进行构建。</p> <p><strong>配置</strong></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">contextRegExp</span> <span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.\/locale$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 忽略 moment.js包中的国际化 local</span>
      <span class="token literal-property property">resourceRegExp</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">moment$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="使用-dllpugin-和-dllreference-进行构建优化"><a href="#使用-dllpugin-和-dllreference-进行构建优化" class="header-anchor">#</a> 使用 dllPugin 和 dllReference 进行构建优化</h2> <p><strong>作用</strong> ：将一些重量的框架库(Vue | React)，固定的包单独打包到一个文件中去，通过 <code>dllReferencePlugin</code>进行引用。</p> <p><strong>配置</strong></p> <p>​	1：创建 <code>webpack.reactDll.js</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">react</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'react'</span><span class="token punctuation">,</span>
      <span class="token string">'react-dom/client'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span> <span class="token operator">:</span> <span class="token string">'[name].dll.js'</span><span class="token punctuation">,</span> <span class="token comment">// 输出的文件名称</span>
    <span class="token literal-property property">path</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../dist/react/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//输出 生成的dll文件目录</span>
    <span class="token literal-property property">library</span> <span class="token operator">:</span> <span class="token string">'[name]_dll'</span> <span class="token comment">// 暴露全局对象 react_dll</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// </span>
      <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'[name]_dll'</span><span class="token punctuation">,</span> <span class="token comment">// 创建的文件名称</span>
      <span class="token literal-property property">path</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'../dist/react/manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 创建引用json文件，并输出到指定目录</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span> <span class="token operator">:</span> <span class="token string">'production'</span><span class="token comment">// 环境选择</span>
<span class="token punctuation">}</span>
</code></pre></div><p>​	2： 在 <code>package.json</code>中 添加 <code>build:react</code> script</p> <div class="language-JSON extra-class"><pre class="language-json"><code>    <span class="token property">&quot;build:react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.reactDll.js&quot;</span> <span class="token comment">// 构建上方创建的文件</span>
</code></pre></div><p>​	3 ： 通过 <code>DllReferencePlugin</code>进行引用,创建的映射JSON文件</p> <div class="language-JS extra-class"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">manifest</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'../dist/react/manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>​	4 ： 通过 <code>add-asset-html-webpack-plugin</code> 将创建好的dll文件自动引入<code>index.html</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> AddAssteHtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'add-asset-html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">AddAssteHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 指定添加那个文件</span>
        <span class="token literal-property property">filepath</span> <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname <span class="token punctuation">,</span> <span class="token string">'../dist/react/react.dll.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// warning 注意 ，在webpack5之后，如果你只提供了文件路径，index.html 引入的 script</span>
        <span class="token comment">//src 会变成 auto/reactDll.js</span>
        <span class="token comment">//如果需要解决该问题 ， 你需要指定 publicPath</span>
        publicPath ：<span class="token string">'./react/'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="使用boundleanalysis进行打包分析"><a href="#使用boundleanalysis进行打包分析" class="header-anchor">#</a> 使用boundleAnalysis进行打包分析</h2> <p><strong>作用</strong> ： 能够快速构建出项目包之间的占比分析，生成可视化的图形界面</p> <p>​	<strong>配置</strong></p> <p>下载插件</p> <p><code>yarn add webpack-bundle-analyzer -D</code></p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token keyword">const</span> BoundAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-bundle-analyzer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin

modul<span class="token punctuation">.</span>expoets <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">BoundAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="C:%5CUsers%5CZhang%5CAppData%5CRoaming%5CTypora%5CdraftsRecover%5Cassets%5C1683702816617.png" alt="1683702816617"></p> <h2 id="使用-prefetching-优化首屏加载速度"><a href="#使用-prefetching-优化首屏加载速度" class="header-anchor">#</a> 使用 prefetching 优化首屏加载速度</h2> <p><strong>作用</strong>：优化首屏加载速度，并提准备好一些资源包。</p> <p>​	<strong>话术</strong></p> <p>采用webpack中的魔法注释 ， 进行异步加载，它会将一些一些同步加载的文件先加载完成后再去加载一些需要的资源，如果是需要等待 <code>主资源</code>加载完成后，再去加载<code>子资源</code>，那你可以在异步导入的函数中 加上 <code>模块注释</code>并且将  <code>webpackPrefetch: true</code>指定为 true。</p> <div class="language-JS extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">getDate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true  */</span> <span class="token string">'dayjs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dayjs'</span> <span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="prefetch和-preload的区别"><a href="#prefetch和-preload的区别" class="header-anchor">#</a> prefetch和 preload的区别</h2> <ul><li><strong>prefetch</strong>(预获取)：将来某些导航下可能需要的资源</li> <li><strong>preload</strong>(预加载)：当前导航下可能需要资源</li></ul> <p>prefetch ：</p> <ul><li>会在父级的 <code>chunks</code> 加载完成后 再去加载子级导入的chunks</li></ul> <p>preload ：</p> <ul><li>preload chunk 会在父 chunk 加载时，以并行方式开始加载。prefetch chunk 会在父 chunk 加载结束后开始加载。</li></ul> <h2 id="webpack-构建流程分析"><a href="#webpack-构建流程分析" class="header-anchor">#</a> webpack 构建流程分析</h2> <ol><li>分析入口，读取入口文件配置</li> <li>将入口文件的require 递归转换为 webpack__require</li> <li>将读取的内容以字符串的形式写入到对象中，对象的键为相对于文件的路径</li> <li>通过ejs模板生成打包完的代码，在模板内通过ejs模板语法循环读取对象内容，然后将创建完的内容写到output配置项目录下的文件中</li> <li>解析loader ， loader 的本质其实是一个函数，将源代码传入到loader中，loader 将需要处理的地方处理完成后返回新的代码给你</li> <li>解析plugin，每个插件应该都遵循插件的开发原则，需要提供Apply方法，在Apply方法中去触发webpack的生命周期函数，在一定的时候执行逻辑操作</li> <li>mode， 环境，webpack会根据环境执行内置的一些优化，例如terr-shaking ， scoped-hositing，代码压缩等</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web/javascript/javascript.html" class="prev">
        JavaScript
      </a></span> <span class="next"><a href="/web/vue/vue3.html">
        vue3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.feb21b2a.js" defer></script><script src="/assets/js/2.75ba61f2.js" defer></script><script src="/assets/js/22.233bac0d.js" defer></script>
  </body>
</html>
